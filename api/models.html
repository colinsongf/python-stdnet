<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Model and Query API &mdash; python stdnet 0.9b1 documentation</title>
    
    <link rel="stylesheet" href="../static/pulsar.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9b1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <link rel="top" title="python stdnet 0.9b1 documentation" href="../index.html" />
    <link rel="up" title="API" href="index.html" />
    <link rel="next" title="Fields API" href="fields.html" />
    <link rel="prev" title="API" href="index.html" /> 
  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="fields.html" title="Fields API"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="API"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">python stdnet 0.9b1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">API</a> &raquo;</li> 
      </ul>
    </div>
<div class="deck">
<div class="header">
    
        <p class="developmentversion">
        Documentation for python stdnet's DEVELOPMENT version. Get the
        <a href="http://pythonhosted.org/python stdnet/api/models.html">release docs here</a>.
        </p>
    
</div>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-stdnet.odm"><span id="model-model"></span></span><div class="section" id="model-and-query-api">
<h1>Model and Query API<a class="headerlink" href="#model-and-query-api" title="Permalink to this headline">¶</a></h1>
<p>The <em>object-data mapper</em> (ODM) is the core of the library.
It defines an API for mapping data in the backend key-value store to objects
in Python. Its name is closely related to
<a class="reference external" href="http://en.wikipedia.org/wiki/Object-relational_mapping">object relational Mapping</a> (ORM),
a programming technique for converting data between incompatible
type systems in traditional <a class="reference external" href="http://en.wikipedia.org/wiki/Relational_database">relational databases</a>
and object-oriented programming languages.</p>
<div class="section" id="model">
<h2>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h2>
<p>The object data mapper presents a method of
associating user-defined Python classes, referred as <strong>models</strong>,
with data in a <a class="reference internal" href="../backends/api.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a>.
These python classes are subclasses of
<a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.odm.StdModel</span></tt></a>.</p>
<div class="section" id="stdmodel-class">
<h3>StdModel Class<a class="headerlink" href="#stdmodel-class" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.StdModel">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">StdModel</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> which contains data in <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a>. This represents
the main class of <a class="reference internal" href="utility.html#module-stdnet.odm" title="stdnet.odm"><tt class="xref py py-mod docutils literal"><span class="pre">stdnet.odm</span></tt></a> module.</p>
<dl class="attribute">
<dt id="stdnet.odm.StdModel.has_all_data">
<tt class="descname">has_all_data</tt><a class="headerlink" href="#stdnet.odm.StdModel.has_all_data" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="docutils literal"><span class="pre">True</span></tt> if this <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> instance has all back-end data
loaded. This applies to persistent instances only. This property is used when
committing changes. If all data is available, the commit will replace the
previous object data entirely, otherwise it will only update it.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.loadedfields">
<tt class="descname">loadedfields</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.loadedfields" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of fields loaded from database</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.fieldvalue_pairs">
<tt class="descname">fieldvalue_pairs</tt><big>(</big><em>exclude_cache=False</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.fieldvalue_pairs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of fields,values pairs. Fields correspond to
the ones which have been loaded (usually all of them) or
not loaded but modified.
Check the <a class="reference internal" href="../examples/performance.html#performance-loadonly"><em>load_only</em></a> query function for more
details.</p>
<p>If <em>exclude_cache</em> evaluates to <tt class="docutils literal"><span class="pre">True</span></tt>, fields with <a class="reference internal" href="fields.html#stdnet.odm.Field.as_cache" title="stdnet.odm.Field.as_cache"><tt class="xref py py-attr docutils literal"><span class="pre">Field.as_cache</span></tt></a>
attribute set to <tt class="docutils literal"><span class="pre">True</span></tt> won&#8217;t be included.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">a generator of two-elements tuples</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.clear_cache_fields">
<tt class="descname">clear_cache_fields</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.clear_cache_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Set cache fields to <tt class="docutils literal"><span class="pre">None</span></tt>. Check <a class="reference internal" href="fields.html#stdnet.odm.Field.as_cache" title="stdnet.odm.Field.as_cache"><tt class="xref py py-attr docutils literal"><span class="pre">Field.as_cache</span></tt></a>
for information regarding fields which are considered cache.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.get_attr_value">
<tt class="descname">get_attr_value</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.get_attr_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the <tt class="docutils literal"><span class="pre">value</span></tt> for the attribute <tt class="docutils literal"><span class="pre">name</span></tt>. The <tt class="docutils literal"><span class="pre">name</span></tt>
can be nested following the <a class="reference internal" href="../examples/underscore.html#tutorial-underscore"><em>double underscore</em></a>
notation, for example <tt class="docutils literal"><span class="pre">group__name</span></tt>. If the attribute is not available it
raises <tt class="xref py py-class docutils literal"><span class="pre">AttributeError</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.clone">
<tt class="descname">clone</tt><big>(</big><em>**data</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method for cloning the instance as a new object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> &#8211; additional which override field data.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">a new instance of this class.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.is_valid">
<tt class="descname">is_valid</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.is_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Kick off the validation algorithm by checking all
<a class="reference internal" href="#stdnet.odm.StdModel.loadedfields" title="stdnet.odm.StdModel.loadedfields"><tt class="xref py py-attr docutils literal"><span class="pre">StdModel.loadedfields</span></tt></a> against their respective validation algorithm.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Boolean indicating if the model validates.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.todict">
<tt class="descname">todict</tt><big>(</big><em>exclude_cache=False</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.todict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of serialised scalar field for pickling.
If the <em>exclude_cache</em> flag is <tt class="docutils literal"><span class="pre">True</span></tt>, fields with <a class="reference internal" href="fields.html#stdnet.odm.Field.as_cache" title="stdnet.odm.Field.as_cache"><tt class="xref py py-attr docutils literal"><span class="pre">Field.as_cache</span></tt></a>
attribute set to <tt class="docutils literal"><span class="pre">True</span></tt> will be excluded.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.tojson">
<tt class="descname">tojson</tt><big>(</big><em>exclude_cache=True</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.tojson" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a JSON serialisable dictionary representation.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.load_fields">
<tt class="descname">load_fields</tt><big>(</big><em>*fields</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.load_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Load extra fields to this <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.load_related_model">
<tt class="descname">load_related_model</tt><big>(</big><em>name</em>, <em>load_only=None</em>, <em>dont_load=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.load_related_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a the <a class="reference internal" href="fields.html#stdnet.odm.ForeignKey" title="stdnet.odm.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> field <tt class="docutils literal"><span class="pre">name</span></tt> if this is part of the
fields of this model and if the related object is not already loaded.
It is used by the lazy loading mechanism of <a class="reference internal" href="../examples/related.html#one-to-many"><em>one-to-many</em></a>
relationships.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> &#8211; the <a class="reference internal" href="fields.html#stdnet.odm.Field.name" title="stdnet.odm.Field.name"><tt class="xref py py-attr docutils literal"><span class="pre">Field.name</span></tt></a> of the <a class="reference internal" href="fields.html#stdnet.odm.ForeignKey" title="stdnet.odm.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> to load.</li>
<li><strong>load_only</strong> &#8211; Optional parameters which specify the fields to load.</li>
<li><strong>dont_load</strong> &#8211; Optional parameters which specify the fields not to load.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the related <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> instance.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="stdnet.odm.StdModel.get_field">
<em class="property">classmethod </em><tt class="descname">get_field</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.get_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> instance at <tt class="docutils literal"><span class="pre">name</span></tt> if available,
otherwise it returns <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="classmethod">
<dt id="stdnet.odm.StdModel.from_base64_data">
<em class="property">classmethod </em><tt class="descname">from_base64_data</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.from_base64_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> from possibly base64encoded data.</p>
<p>This method is used to load models from data obtained from the <a class="reference internal" href="#stdnet.odm.StdModel.tojson" title="stdnet.odm.StdModel.tojson"><tt class="xref py py-meth docutils literal"><span class="pre">tojson()</span></tt></a>
method.</p>
</dd></dl>

<dl class="classmethod">
<dt id="stdnet.odm.StdModel.pk">
<em class="property">classmethod </em><tt class="descname">pk</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.pk" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the primary key <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> for this model. This is a
proxy for the <tt class="xref py py-attr docutils literal"><span class="pre">Metaclass.pk</span></tt> attribute.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id1">
<h3>Model<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Model">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Model</tt><a class="headerlink" href="#stdnet.odm.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the base class for both <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> and <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>
classes. It implements the <a class="reference internal" href="#stdnet.odm.Model.uuid" title="stdnet.odm.Model.uuid"><tt class="xref py py-attr docutils literal"><span class="pre">uuid</span></tt></a> attribute which provides the universal
unique identifier for an instance of a model.</p>
<dl class="attribute">
<dt id="stdnet.odm.Model._meta">
<tt class="descname">_meta</tt><a class="headerlink" href="#stdnet.odm.Model._meta" title="Permalink to this definition">¶</a></dt>
<dd><p>A class attribute which is an instance of <a class="reference internal" href="#stdnet.odm.ModelMeta" title="stdnet.odm.ModelMeta"><tt class="xref py py-class docutils literal"><span class="pre">ModelMeta</span></tt></a>, it
containes all the information needed by a
<a class="reference internal" href="../backends/api.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Model.session">
<tt class="descname">session</tt><a class="headerlink" href="#stdnet.odm.Model.session" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> which loaded the instance. Only available,
when the instance has been loaded from a <a class="reference internal" href="../backends/api.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a>
via a <a class="reference internal" href="../examples/query.html#tutorial-query"><em>query operation</em></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Model.DoesNotExist">
<tt class="descname">DoesNotExist</tt><a class="headerlink" href="#stdnet.odm.Model.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception raised when an instance of a model does not exist.</p>
<p>alias of <tt class="xref py py-class docutils literal"><span class="pre">ObjectNotFound</span></tt></p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Model.DoesNotValidate">
<tt class="descname">DoesNotValidate</tt><a class="headerlink" href="#stdnet.odm.Model.DoesNotValidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception raised when an instance of a model does not validate. Usually
raised when trying to save an invalid instance.</p>
<p>alias of <tt class="xref py py-class docutils literal"><span class="pre">ObjectNotValidated</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Model.get_state">
<tt class="descname">get_state</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Model.get_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current <a class="reference internal" href="#stdnet.odm.ModelState" title="stdnet.odm.ModelState"><tt class="xref py py-class docutils literal"><span class="pre">ModelState</span></tt></a> for this <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>.
If <tt class="docutils literal"><span class="pre">kwargs</span></tt> parameters are passed a new <a class="reference internal" href="#stdnet.odm.ModelState" title="stdnet.odm.ModelState"><tt class="xref py py-class docutils literal"><span class="pre">ModelState</span></tt></a> is created,
otherwise it returns the cached value.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Model.pkvalue">
<tt class="descname">pkvalue</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Model.pkvalue" title="Permalink to this definition">¶</a></dt>
<dd><p>Value of primary key</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Model.uuid">
<tt class="descname">uuid</tt><a class="headerlink" href="#stdnet.odm.Model.uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Universally unique identifier for an instance of a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt>
<tt class="descname">session</tt></dt>
<dd><p>The current <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> for this model.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Model.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#stdnet.odm.Model.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>The <tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDatServer</span></tt> for this instance.</p>
<p>It can be <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Model.read_backend">
<tt class="descname">read_backend</tt><a class="headerlink" href="#stdnet.odm.Model.read_backend" title="Permalink to this definition">¶</a></dt>
<dd><p>The read <tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDatServer</span></tt> for this instance.</p>
<p>It can be <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Model.get_attr_value">
<tt class="descname">get_attr_value</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#stdnet.odm.Model.get_attr_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Provided for compatibility with <a class="reference internal" href="#stdnet.odm.StdModel.get_attr_value" title="stdnet.odm.StdModel.get_attr_value"><tt class="xref py py-meth docutils literal"><span class="pre">StdModel.get_attr_value()</span></tt></a>.
For this class it simply get the attribute at name:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Model.save">
<tt class="descname">save</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Model.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the model by adding it to the <a class="reference internal" href="#stdnet.odm.Model.session" title="stdnet.odm.Model.session"><tt class="xref py py-attr docutils literal"><span class="pre">session</span></tt></a>. If the
<a class="reference internal" href="#stdnet.odm.Model.session" title="stdnet.odm.Model.session"><tt class="xref py py-attr docutils literal"><span class="pre">session</span></tt></a> is not available, it raises a <tt class="xref py py-class docutils literal"><span class="pre">SessionNotAvailable</span></tt>
exception.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Model.delete">
<tt class="descname">delete</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Model.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the model. If the <a class="reference internal" href="#stdnet.odm.Model.session" title="stdnet.odm.Model.session"><tt class="xref py py-attr docutils literal"><span class="pre">session</span></tt></a> is not available,
it raises a <tt class="xref py py-class docutils literal"><span class="pre">SessionNotAvailable</span></tt> exception.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="create-model">
<h3>Create Model<a class="headerlink" href="#create-model" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="stdnet.odm.create_model">
<tt class="descclassname">stdnet.odm.</tt><tt class="descname">create_model</tt><big>(</big><em>name</em>, <em>*attributes</em>, <em>**params</em><big>)</big><a class="headerlink" href="#stdnet.odm.create_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> class for objects requiring
and interface similar to <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a>. We refers to this type
of models as <a class="reference internal" href="../examples/local.html#local-models"><em>local models</em></a> since instances of such
models are not persistent on a <a class="reference internal" href="../backends/api.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> &#8211; Name of the model class.</li>
<li><strong>attributes</strong> &#8211; positiona attribute names. These are the only attribute
available to the model during the default constructor.</li>
<li><strong>params</strong> &#8211; key-valued parameter to pass to the <a class="reference internal" href="#stdnet.odm.ModelMeta" title="stdnet.odm.ModelMeta"><tt class="xref py py-class docutils literal"><span class="pre">ModelMeta</span></tt></a>
constructor.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a local <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> class.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="model-meta">
<span id="database-metaclass"></span><h3>Model Meta<a class="headerlink" href="#model-meta" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.ModelMeta">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">ModelMeta</tt><big>(</big><em>model</em>, <em>fields</em>, <em>app_label=None</em>, <em>modelkey=None</em>, <em>name=None</em>, <em>register=True</em>, <em>pkname=None</em>, <em>ordering=None</em>, <em>attributes=None</em>, <em>abstract=False</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.ModelMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for storing meta data for a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> class.
To override default behaviour you can specify the <tt class="docutils literal"><span class="pre">Meta</span></tt> class as an inner
class of <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> in the following way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">stdnet</span> <span class="kn">import</span> <span class="n">odm</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">StdModel</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
    <span class="o">...</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="s">&#39;-timestamp&#39;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;custom&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>register</strong> &#8211; if <tt class="docutils literal"><span class="pre">True</span></tt> (default), this <a class="reference internal" href="#stdnet.odm.ModelMeta" title="stdnet.odm.ModelMeta"><tt class="xref py py-class docutils literal"><span class="pre">ModelMeta</span></tt></a> is
registered in the global models hashtable.</li>
<li><strong>abstract</strong> &#8211; Check the <a class="reference internal" href="#stdnet.odm.ModelMeta.abstract" title="stdnet.odm.ModelMeta.abstract"><tt class="xref py py-attr docutils literal"><span class="pre">abstract</span></tt></a> attribute.</li>
<li><strong>ordering</strong> &#8211; Check the <a class="reference internal" href="#stdnet.odm.ModelMeta.ordering" title="stdnet.odm.ModelMeta.ordering"><tt class="xref py py-attr docutils literal"><span class="pre">ordering</span></tt></a> attribute.</li>
<li><strong>app_label</strong> &#8211; Check the <a class="reference internal" href="#stdnet.odm.ModelMeta.app_label" title="stdnet.odm.ModelMeta.app_label"><tt class="xref py py-attr docutils literal"><span class="pre">app_label</span></tt></a> attribute.</li>
<li><strong>name</strong> &#8211; Check the <a class="reference internal" href="#stdnet.odm.ModelMeta.name" title="stdnet.odm.ModelMeta.name"><tt class="xref py py-attr docutils literal"><span class="pre">name</span></tt></a> attribute.</li>
<li><strong>modelkey</strong> &#8211; Check the <a class="reference internal" href="#stdnet.odm.ModelMeta.modelkey" title="stdnet.odm.ModelMeta.modelkey"><tt class="xref py py-attr docutils literal"><span class="pre">modelkey</span></tt></a> attribute.</li>
<li><strong>attributes</strong> &#8211; Check the <a class="reference internal" href="#stdnet.odm.ModelMeta.attributes" title="stdnet.odm.ModelMeta.attributes"><tt class="xref py py-attr docutils literal"><span class="pre">attributes</span></tt></a> attribute.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This is the list of attributes and methods available. All attributes,
but the ones mantioned above, are initialized by the object relational
mapper.</p>
<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.abstract">
<tt class="descname">abstract</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.abstract" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="docutils literal"><span class="pre">True</span></tt>, This is an abstract Meta class.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.model">
<tt class="descname">model</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.model" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> for which this class is the database metadata container.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.name">
<tt class="descname">name</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Usually it is the <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> class name in lower-case, but it
can be customised.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.app_label">
<tt class="descname">app_label</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.app_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Unless specified it is the name of the directory or file
(if at top level) containing the <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> definition. It can be
customised.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.modelkey">
<tt class="descname">modelkey</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.modelkey" title="Permalink to this definition">¶</a></dt>
<dd><p>The modelkey which is by default given by <tt class="docutils literal"><span class="pre">app_label.name</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.ordering">
<tt class="descname">ordering</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.ordering" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional name of a <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> in the <a class="reference internal" href="#stdnet.odm.ModelMeta.model" title="stdnet.odm.ModelMeta.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a>.
If provided, model indices will be sorted with respect to the value of the
specified field. It can also be a <a class="reference internal" href="#stdnet.odm.autoincrement" title="stdnet.odm.autoincrement"><tt class="xref py py-class docutils literal"><span class="pre">autoincrement</span></tt></a> instance.
Check the <a class="reference internal" href="../examples/sorting.html#sorting"><em>sorting</em></a> documentation for more details.</p>
<p>Default: <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.dfields">
<tt class="descname">dfields</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.dfields" title="Permalink to this definition">¶</a></dt>
<dd><p>dictionary of <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> instances.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.fields">
<tt class="descname">fields</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.fields" title="Permalink to this definition">¶</a></dt>
<dd><p>list of all <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> instances.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.scalarfields">
<tt class="descname">scalarfields</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.scalarfields" title="Permalink to this definition">¶</a></dt>
<dd><p>Ordered list of all <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> which are not <a class="reference internal" href="fields.html#stdnet.odm.StructureField" title="stdnet.odm.StructureField"><tt class="xref py py-class docutils literal"><span class="pre">StructureField</span></tt></a>.
The order is the same as in the <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> definition. The <a class="reference internal" href="#stdnet.odm.ModelMeta.pk" title="stdnet.odm.ModelMeta.pk"><tt class="xref py py-attr docutils literal"><span class="pre">pk</span></tt></a>
field is not included.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.indices">
<tt class="descname">indices</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.indices" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> which are indices (<a class="reference internal" href="fields.html#stdnet.odm.Field.index" title="stdnet.odm.Field.index"><tt class="xref py py-attr docutils literal"><span class="pre">Field.index</span></tt></a> attribute
set to <tt class="docutils literal"><span class="pre">True</span></tt>).</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.pk">
<tt class="descname">pk</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.pk" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> representing the primary key.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.related">
<tt class="descname">related</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.related" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of <a class="reference internal" href="#stdnet.odm.related.RelatedManager" title="stdnet.odm.related.RelatedManager"><tt class="xref py py-class docutils literal"><span class="pre">related.RelatedManager</span></tt></a> for the <a class="reference internal" href="#stdnet.odm.ModelMeta.model" title="stdnet.odm.ModelMeta.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a>. It is
created at runtime by the object data mapper.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.manytomany">
<tt class="descname">manytomany</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.manytomany" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <a class="reference internal" href="fields.html#stdnet.odm.ManyToManyField" title="stdnet.odm.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> names for the <a class="reference internal" href="#stdnet.odm.ModelMeta.model" title="stdnet.odm.ModelMeta.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a>. This
information is useful during registration.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.attributes">
<tt class="descname">attributes</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Additional attributes for <a class="reference internal" href="#stdnet.odm.ModelMeta.model" title="stdnet.odm.ModelMeta.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelMeta.type">
<tt class="descname">type</tt><a class="headerlink" href="#stdnet.odm.ModelMeta.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Model type, either <tt class="docutils literal"><span class="pre">structure</span></tt> or <tt class="docutils literal"><span class="pre">object</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.ModelMeta.make_object">
<tt class="descname">make_object</tt><big>(</big><em>state=None</em>, <em>backend=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.ModelMeta.make_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new instance of <a class="reference internal" href="#stdnet.odm.ModelMeta.model" title="stdnet.odm.ModelMeta.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a> from a <em>state</em> tuple.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.ModelMeta.pkname">
<tt class="descname">pkname</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.ModelMeta.pkname" title="Permalink to this definition">¶</a></dt>
<dd><p>Primary key name. A shortcut for <tt class="docutils literal"><span class="pre">self.pk.name</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.ModelMeta.pk_to_python">
<tt class="descname">pk_to_python</tt><big>(</big><em>value</em>, <em>backend</em><big>)</big><a class="headerlink" href="#stdnet.odm.ModelMeta.pk_to_python" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the primary key <tt class="docutils literal"><span class="pre">value</span></tt> to a valid python representation.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.ModelMeta.is_valid">
<tt class="descname">is_valid</tt><big>(</big><em>instance</em><big>)</big><a class="headerlink" href="#stdnet.odm.ModelMeta.is_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform validation for <em>instance</em> and stores serialized data,
indexes and errors into local cache.
Return <tt class="docutils literal"><span class="pre">True</span></tt> if the instance is ready to be saved to database.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.ModelMeta.backend_fields">
<tt class="descname">backend_fields</tt><big>(</big><em>fields</em><big>)</big><a class="headerlink" href="#stdnet.odm.ModelMeta.backend_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a two elements tuple containing a list
of fields names and a list of field attribute names.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.ModelMeta.as_dict">
<tt class="descname">as_dict</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.ModelMeta.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Model metadata in a dictionary</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="model-state">
<h3>Model State<a class="headerlink" href="#model-state" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.ModelState">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">ModelState</tt><big>(</big><em>instance</em>, <em>iid=None</em>, <em>action=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.ModelState" title="Permalink to this definition">¶</a></dt>
<dd><p>The database state of a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.ModelState.action">
<tt class="descname">action</tt><a class="headerlink" href="#stdnet.odm.ModelState.action" title="Permalink to this definition">¶</a></dt>
<dd><p>Action to be performed by the backend server when committing
changes to the instance of <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> for which this is a state.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelState.persistent">
<tt class="descname">persistent</tt><a class="headerlink" href="#stdnet.odm.ModelState.persistent" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="docutils literal"><span class="pre">True</span></tt> if the instance is persistent in the backend server.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.ModelState.iid">
<tt class="descname">iid</tt><a class="headerlink" href="#stdnet.odm.ModelState.iid" title="Permalink to this definition">¶</a></dt>
<dd><p>Instance primary key or a temporary key if not yet available.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="autoincrement">
<h3>autoincrement<a class="headerlink" href="#autoincrement" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.autoincrement">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">autoincrement</tt><big>(</big><em>incrby=1</em>, <em>desc=False</em><big>)</big><a class="headerlink" href="#stdnet.odm.autoincrement" title="Permalink to this definition">¶</a></dt>
<dd><p>An <a class="reference internal" href="#stdnet.odm.autoincrement" title="stdnet.odm.autoincrement"><tt class="xref py py-class docutils literal"><span class="pre">autoincrement</span></tt></a> is used in a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> Meta
class to specify a model with <a class="reference internal" href="../examples/sorting.html#incremental-sorting"><em>incremental sorting</em></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.autoincrement.incrby">
<tt class="descname">incrby</tt><a class="headerlink" href="#stdnet.odm.autoincrement.incrby" title="Permalink to this definition">¶</a></dt>
<dd><p>The amount to increment the score by when a duplicate element is saved.</p>
<p>Default: 1.</p>
</dd></dl>

<p>For example, the <tt class="xref py py-class docutils literal"><span class="pre">stdnet.apps.searchengine.Word</span></tt> model is defined as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Word</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">StdModel</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">SymbolField</span><span class="p">(</span><span class="n">primary_key</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="o">-</span><span class="n">autoincrement</span><span class="p">()</span>
</pre></div>
</div>
<p>This means every time we save a new instance of Word, and that instance has
an id already available, the score of that word is incremented by the
<a class="reference internal" href="#stdnet.odm.autoincrement.incrby" title="stdnet.odm.autoincrement.incrby"><tt class="xref py py-attr docutils literal"><span class="pre">incrby</span></tt></a> attribute.</p>
</dd></dl>

</div>
</div>
<div class="section" id="queries">
<h2>Queries<a class="headerlink" href="#queries" title="Permalink to this headline">¶</a></h2>
<div class="section" id="query-base-class">
<h3>Query base class<a class="headerlink" href="#query-base-class" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Q">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Q</tt><big>(</big><em>meta</em>, <em>session</em>, <em>select_related=None</em>, <em>ordering=None</em>, <em>fields=None</em>, <em>get_field=None</em>, <em>name=None</em>, <em>keyword=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Q" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> and <a class="reference internal" href="#stdnet.odm.QueryElement" title="stdnet.odm.QueryElement"><tt class="xref py py-class docutils literal"><span class="pre">QueryElement</span></tt></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.Q.meta">
<tt class="descname">meta</tt><a class="headerlink" href="#stdnet.odm.Q.meta" title="Permalink to this definition">¶</a></dt>
<dd><p>The <tt class="xref py py-attr docutils literal"><span class="pre">StdModel._meta</span></tt> attribute.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Q.model">
<tt class="descname">model</tt><a class="headerlink" href="#stdnet.odm.Q.model" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> class for this query.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Q.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#stdnet.odm.Q.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="../backends/api.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> class for this query.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Q.get_field">
<tt class="descname">get_field</tt><big>(</big><em>field</em><big>)</big><a class="headerlink" href="#stdnet.odm.Q.get_field" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Q" title="stdnet.odm.Q"><tt class="xref py py-class docutils literal"><span class="pre">Q</span></tt></a> performs a series of operations and ultimately
generate of set of matched elements <tt class="docutils literal"><span class="pre">ids</span></tt>. If on the other hand, a
different field is required, it can be specified with the <a class="reference internal" href="#stdnet.odm.Q.get_field" title="stdnet.odm.Q.get_field"><tt class="xref py py-meth docutils literal"><span class="pre">get_field()</span></tt></a>
method. For example, lets say a model has a field called <tt class="docutils literal"><span class="pre">object_id</span></tt>
which contains ids of another model, we could use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s">&#39;object_id&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>to obtain a set containing the values of matched elements <tt class="docutils literal"><span class="pre">object_id</span></tt>
fields.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>field</strong> &#8211; the name of the field which will be used to obtained the
matched elements value. Must be an index.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">a new <a class="reference internal" href="#stdnet.odm.Q" title="stdnet.odm.Q"><tt class="xref py py-class docutils literal"><span class="pre">Q</span></tt></a> instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Q.backend_query">
<tt class="descname">backend_query</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Q.backend_query" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Build the <tt class="xref py py-class docutils literal"><span class="pre">stdnet.utils.async.BackendQuery</span></tt> for this</dt>
<dd>instance.</dd>
</dl>
<p>This is a virtual method with different implementation in <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>
and <a class="reference internal" href="#stdnet.odm.QueryElement" title="stdnet.odm.QueryElement"><tt class="xref py py-class docutils literal"><span class="pre">QueryElement</span></tt></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="query">
<span id="model-query"></span><h3>Query<a class="headerlink" href="#query" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Query">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Query</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> is produced in terms of a given <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>,
using the <a class="reference internal" href="#stdnet.odm.Session.query" title="stdnet.odm.Session.query"><tt class="xref py py-meth docutils literal"><span class="pre">Session.query()</span></tt></a> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
</pre></div>
</div>
<p>A query is equivalent to a collection of SELECT statements for a standard
relational database. It has a  a generative interface whereby successive calls
return a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> object, a copy of the former with additional
criteria and options associated with it.</p>
<p><strong>ATTRIBUTES</strong></p>
<dl class="attribute">
<dt id="stdnet.odm.Query._meta">
<tt class="descname">_meta</tt><a class="headerlink" href="#stdnet.odm.Query._meta" title="Permalink to this definition">¶</a></dt>
<dd><p>The <tt class="xref py py-attr docutils literal"><span class="pre">StdModel._meta</span></tt> attribute.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.model">
<tt class="descname">model</tt><a class="headerlink" href="#stdnet.odm.Query.model" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> class for this query.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.session">
<tt class="descname">session</tt><a class="headerlink" href="#stdnet.odm.Query.session" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> which created the <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> via the
<a class="reference internal" href="#stdnet.odm.Session.query" title="stdnet.odm.Session.query"><tt class="xref py py-meth docutils literal"><span class="pre">Session.query()</span></tt></a> method.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#stdnet.odm.Query.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="../backends/api.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> holding the data to query.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query._get_field">
<tt class="descname">_get_field</tt><a class="headerlink" href="#stdnet.odm.Query._get_field" title="Permalink to this definition">¶</a></dt>
<dd><p>When iterating over a <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>, you get back instances of
the <a class="reference internal" href="#stdnet.odm.Query.model" title="stdnet.odm.Query.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a> class. However, if <tt class="docutils literal"><span class="pre">_get_field</span></tt> is specified
you get back values of the field specified.
This can be changed via the <tt class="xref py py-meth docutils literal"><span class="pre">get_field()</span></tt> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
<p>the results is a list of name values (provided the model has a
<tt class="docutils literal"><span class="pre">name</span></tt> field of course).</p>
<p>Default: <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.fargs">
<tt class="descname">fargs</tt><a class="headerlink" href="#stdnet.odm.Query.fargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary containing the <tt class="docutils literal"><span class="pre">filter</span></tt> lookup parameters each one of
them corresponding to a <tt class="docutils literal"><span class="pre">where</span></tt> clause of a select. This value is
manipulated via the <a class="reference internal" href="#stdnet.odm.Query.filter" title="stdnet.odm.Query.filter"><tt class="xref py py-meth docutils literal"><span class="pre">filter()</span></tt></a> method.</p>
<p>Default: <tt class="docutils literal"><span class="pre">{}</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.eargs">
<tt class="descname">eargs</tt><a class="headerlink" href="#stdnet.odm.Query.eargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary containing the <tt class="docutils literal"><span class="pre">exclude</span></tt> lookup parameters each one
of them corresponding to a <tt class="docutils literal"><span class="pre">where</span></tt> clause of a select. This value is
manipulated via the <a class="reference internal" href="#stdnet.odm.Query.exclude" title="stdnet.odm.Query.exclude"><tt class="xref py py-meth docutils literal"><span class="pre">exclude()</span></tt></a> method.</p>
<p>Default: <tt class="docutils literal"><span class="pre">{}</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.ordering">
<tt class="descname">ordering</tt><a class="headerlink" href="#stdnet.odm.Query.ordering" title="Permalink to this definition">¶</a></dt>
<dd><p>optional ordering field.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.text">
<tt class="descname">text</tt><a class="headerlink" href="#stdnet.odm.Query.text" title="Permalink to this definition">¶</a></dt>
<dd><p>optional text to filter result on.</p>
<p>Default: <tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt>.</p>
</dd></dl>

<p><strong>METHODS</strong></p>
<dl class="method">
<dt id="stdnet.odm.Query.__init__">
<tt class="descname">__init__</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> is not initialized directly but via the
<a class="reference internal" href="#stdnet.odm.Session.query" title="stdnet.odm.Session.query"><tt class="xref py py-meth docutils literal"><span class="pre">Session.query()</span></tt></a> or <a class="reference internal" href="#stdnet.odm.Manager.query" title="stdnet.odm.Manager.query"><tt class="xref py py-meth docutils literal"><span class="pre">Manager.query()</span></tt></a> methods.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.filter">
<tt class="descname">filter</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> with additional clauses corresponding to
<tt class="docutils literal"><span class="pre">where</span></tt> or <tt class="docutils literal"><span class="pre">limit</span></tt> in a <tt class="docutils literal"><span class="pre">SQL</span> <span class="pre">SELECT</span></tt> statement.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; dictionary of limiting clauses.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> instance.</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">qs</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">group</span> <span class="o">=</span> <span class="s">&#39;planet&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.exclude">
<tt class="descname">exclude</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.exclude" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> with additional clauses corresponding
to <tt class="docutils literal"><span class="pre">EXCEPT</span></tt> in a <tt class="docutils literal"><span class="pre">SQL</span> <span class="pre">SELECT</span></tt> statement.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; dictionary of limiting clauses.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> instance.</td>
</tr>
</tbody>
</table>
<p>Using an equivalent example to the <a class="reference internal" href="#stdnet.odm.Query.filter" title="stdnet.odm.Query.filter"><tt class="xref py py-meth docutils literal"><span class="pre">filter()</span></tt></a> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
<span class="n">result1</span> <span class="o">=</span> <span class="n">qs</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">group</span> <span class="o">=</span> <span class="s">&#39;planet&#39;</span><span class="p">)</span>
<span class="n">result2</span> <span class="o">=</span> <span class="n">qs</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">group__in</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;planet&#39;</span><span class="p">,</span><span class="s">&#39;stars&#39;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.union">
<tt class="descname">union</tt><big>(</big><em>*queries</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.union" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> obtained form the union of this
<a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> with one or more <em>queries</em>.
For example, lets say we want to have the union
of two queries obtained from the <a class="reference internal" href="#stdnet.odm.Query.filter" title="stdnet.odm.Query.filter"><tt class="xref py py-meth docutils literal"><span class="pre">filter()</span></tt></a> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">query</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
<span class="n">qs</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">field1</span> <span class="o">=</span> <span class="s">&#39;bla&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">field2</span> <span class="o">=</span> <span class="s">&#39;foo&#39;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.intersect">
<tt class="descname">intersect</tt><big>(</big><em>*queries</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.intersect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> obtained form the intersection of this
<a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> with one or more <em>queries</em>. Workds the same way as
the <a class="reference internal" href="#stdnet.odm.Query.union" title="stdnet.odm.Query.union"><tt class="xref py py-meth docutils literal"><span class="pre">union()</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.sort_by">
<tt class="descname">sort_by</tt><big>(</big><em>ordering</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.sort_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the query by the given field</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ordering</strong> &#8211; a string indicating the class:<cite>Field</cite> name to sort by.
If prefixed with <tt class="docutils literal"><span class="pre">-</span></tt>, the sorting will be in descending order, otherwise
in ascending order.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.search">
<tt class="descname">search</tt><big>(</big><em>text</em>, <em>lookup=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Search <em>text</em> in model. A search engine needs to be installed
for this function to be available.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>text</strong> &#8211; a string to search.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.where">
<tt class="descname">where</tt><big>(</big><em>code</em>, <em>load_only=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.where" title="Permalink to this definition">¶</a></dt>
<dd><p>For <a class="reference internal" href="../backends/index.html#db-index"><em>backend</em></a> supporting scripting, it is possible
to construct complex queries which execute the scripting <em>code</em> against
each element in the query. The <em>coe</em> should reference an instance of
<a class="reference internal" href="#stdnet.odm.Query.model" title="stdnet.odm.Query.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a> by <tt class="docutils literal"><span class="pre">this</span></tt> keyword.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; a valid expression in the scripting language of the database.</li>
<li><strong>load_only</strong> &#8211; Load only the selected fields when performing the query
(this is different from the <a class="reference internal" href="#stdnet.odm.Query.load_only" title="stdnet.odm.Query.load_only"><tt class="xref py py-meth docutils literal"><span class="pre">load_only()</span></tt></a> method which is used when
fetching data from the database). This field is an optimization which is
used by the <a class="reference internal" href="../backends/redis.html#redis-server"><em>redis backend</em></a> only and can be safely
ignored in most use-cases.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.search_queries">
<tt class="descname">search_queries</tt><big>(</big><em>q</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.search_queries" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <tt class="xref py py-class docutils literal"><span class="pre">QueryElem</span></tt> for <em>q</em> applying a text search.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.load_related">
<tt class="descname">load_related</tt><big>(</big><em>related</em>, <em>*related_fields</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.load_related" title="Permalink to this definition">¶</a></dt>
<dd><p>It returns a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> that automatically
follows the foreign-key relationship <tt class="docutils literal"><span class="pre">related</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>related</strong> &#8211; A field name corresponding to a <a class="reference internal" href="fields.html#stdnet.odm.ForeignKey" title="stdnet.odm.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a>
in <a class="reference internal" href="#stdnet.odm.Query.model" title="stdnet.odm.Query.model"><tt class="xref py py-attr docutils literal"><span class="pre">Query.model</span></tt></a>.</li>
<li><strong>related_fields</strong> &#8211; optional <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> names for the <tt class="docutils literal"><span class="pre">related</span></tt>
model to load. If not provided, all fields will be loaded.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This function is <a class="reference internal" href="../examples/performance.html#performance-loadrelated"><em>performance boost</em></a> when
accessing the related fields of all (most) objects in your query.</p>
<p>If Your model contains more than one foreign key, you can use this function
in a generative way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">myquery</span><span class="o">.</span><span class="n">load_related</span><span class="p">(</span><span class="s">&#39;rel1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">load_related</span><span class="p">(</span><span class="s">&#39;rel2&#39;</span><span class="p">,</span><span class="s">&#39;field1&#39;</span><span class="p">,</span><span class="s">&#39;field2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.load_only">
<tt class="descname">load_only</tt><big>(</big><em>*fields</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.load_only" title="Permalink to this definition">¶</a></dt>
<dd><p>This is provides a <a class="reference internal" href="../examples/performance.html#increase-performance"><em>performance boost</em></a>
in cases when you need to load a subset of fields of your model. The boost
achieved is less than the one obtained when using
<a class="reference internal" href="#stdnet.odm.Query.load_related" title="stdnet.odm.Query.load_related"><tt class="xref py py-meth docutils literal"><span class="pre">Query.load_related()</span></tt></a>, since it does not reduce the number of requests
to the database. However, it can save you lots of bandwidth when excluding
data intensive fields you don&#8217;t need.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.dont_load">
<tt class="descname">dont_load</tt><big>(</big><em>*fields</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.dont_load" title="Permalink to this definition">¶</a></dt>
<dd><p>Works like <a class="reference internal" href="#stdnet.odm.Query.load_only" title="stdnet.odm.Query.load_only"><tt class="xref py py-meth docutils literal"><span class="pre">load_only()</span></tt></a> to provides a
<a class="reference internal" href="../examples/performance.html#increase-performance"><em>performance boost</em></a> in cases when you need
to load all fields except a subset specified by <em>fields</em>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.items">
<tt class="descname">items</tt><big>(</big><em>callback=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve all items for this <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.get">
<tt class="descname">get</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance of a model matching the query. A special case is
the query on <tt class="docutils literal"><span class="pre">id</span></tt> which provides a direct access to the <a class="reference internal" href="#stdnet.odm.Query.session" title="stdnet.odm.Query.session"><tt class="xref py py-attr docutils literal"><span class="pre">session</span></tt></a>
instances. If the given primary key is present in the session, the object
is returned directly without performing any query.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.count">
<tt class="descname">count</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Query.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of objects in <tt class="docutils literal"><span class="pre">self</span></tt>.
This method is efficient since the <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> does not
receive any data from the server apart from the number of matched elements.
It construct the queries and count the
objects on the server side.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.delete">
<tt class="descname">delete</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Query.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all matched elements of the <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>. It returns the
list of ids deleted.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.construct">
<tt class="descname">construct</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Query.construct" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the <a class="reference internal" href="#stdnet.odm.QueryElement" title="stdnet.odm.QueryElement"><tt class="xref py py-class docutils literal"><span class="pre">QueryElement</span></tt></a> representing this query.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.backend_query">
<tt class="descname">backend_query</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.backend_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Build and return the <tt class="xref py py-class docutils literal"><span class="pre">stdnet.utils.async.BackendQuery</span></tt>.
This is a lazy method in the sense that it is evaluated once only and its
result stored for future retrieval.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.test_unique">
<tt class="descname">test_unique</tt><big>(</big><em>fieldname</em>, <em>value</em>, <em>instance=None</em>, <em>exception=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.test_unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if a given field <em>fieldname</em> has a unique <em>value</em>
in <a class="reference internal" href="#stdnet.odm.Query.model" title="stdnet.odm.Query.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a>. The field must be an index of the model.
If the field value is not unique and the <em>instance</em> is not the same
an exception is raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fieldname</strong> &#8211; <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> name to test</li>
<li><strong>vale</strong> &#8211; <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> value</li>
<li><strong>instance</strong> &#8211; optional instance of <a class="reference internal" href="#stdnet.odm.Query.model" title="stdnet.odm.Query.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a></li>
<li><strong>exception</strong> &#8211; optional exception class to raise if the test fails.
Default: <tt class="xref py py-attr docutils literal"><span class="pre">ModelMixin.DoesNotValidate</span></tt>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>value</em></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.map_reduce">
<tt class="descname">map_reduce</tt><big>(</big><em>map_script</em>, <em>reduce_script</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.map_reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a map/reduce operation on this query.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.aggregate">
<tt class="descname">aggregate</tt><big>(</big><em>kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.aggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate lookup parameters.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="queryelement">
<h3>QueryElement<a class="headerlink" href="#queryelement" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.QueryElement">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">QueryElement</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.QueryElement" title="Permalink to this definition">¶</a></dt>
<dd><p>An element of a <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.QueryElement.qs">
<tt class="descname">qs</tt><a class="headerlink" href="#stdnet.odm.QueryElement.qs" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> which contains this <a class="reference internal" href="#stdnet.odm.QueryElement" title="stdnet.odm.QueryElement"><tt class="xref py py-class docutils literal"><span class="pre">QueryElement</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.QueryElement.underlying">
<tt class="descname">underlying</tt><a class="headerlink" href="#stdnet.odm.QueryElement.underlying" title="Permalink to this definition">¶</a></dt>
<dd><p>the element contained in the <a class="reference internal" href="#stdnet.odm.QueryElement" title="stdnet.odm.QueryElement"><tt class="xref py py-class docutils literal"><span class="pre">QueryElement</span></tt></a>. This underlying is
an iterable or another <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.QueryElement.valid">
<tt class="descname">valid</tt><a class="headerlink" href="#stdnet.odm.QueryElement.valid" title="Permalink to this definition">¶</a></dt>
<dd><p>if <tt class="docutils literal"><span class="pre">False</span></tt> this <a class="reference internal" href="#stdnet.odm.QueryElement" title="stdnet.odm.QueryElement"><tt class="xref py py-class docutils literal"><span class="pre">QueryElement</span></tt></a> has no underlying elements and
won&#8217;t produce any query.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="searchengine-interface">
<h3>SearchEngine Interface<a class="headerlink" href="#searchengine-interface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.SearchEngine">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">SearchEngine</tt><big>(</big><em>backend=None</em>, <em>logger=None</em>, <em>max_in_session=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>Stdnet search engine driver. This is an abstract class which
expose the base functionalities for full text-search on model instances.
Stdnet also provides a <a class="reference internal" href="../examples/search.html#tutorial-search"><em>python implementation</em></a>
of this interface.</p>
<p>The main methods to be implemented are <a class="reference internal" href="#stdnet.odm.SearchEngine.add_item" title="stdnet.odm.SearchEngine.add_item"><tt class="xref py py-meth docutils literal"><span class="pre">add_item()</span></tt></a>,
<tt class="xref py py-meth docutils literal"><span class="pre">remove_index()</span></tt> and <a class="reference internal" href="#stdnet.odm.SearchEngine.search_model" title="stdnet.odm.SearchEngine.search_model"><tt class="xref py py-meth docutils literal"><span class="pre">search_model()</span></tt></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.SearchEngine.word_middleware">
<tt class="descname">word_middleware</tt><a class="headerlink" href="#stdnet.odm.SearchEngine.word_middleware" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of middleware functions for preprocessing text
to be indexed. A middleware function has arity 1 by
accepting an iterable of words and
returning an iterable of words. Word middleware functions
are added to the search engine via the
<a class="reference internal" href="#stdnet.odm.SearchEngine.add_word_middleware" title="stdnet.odm.SearchEngine.add_word_middleware"><tt class="xref py py-meth docutils literal"><span class="pre">add_word_middleware()</span></tt></a> method.</p>
<p>For example this function remove a group of words from the index:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">se</span> <span class="o">=</span> <span class="n">SearchEngine</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">stopwords</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">swords</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">swords</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">swords</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">words</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">swords</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">word</span>

<span class="n">se</span><span class="o">.</span><span class="n">add_word_middleware</span><span class="p">(</span><span class="n">stopwords</span><span class="p">(</span><span class="s">&#39;and&#39;</span><span class="p">,</span><span class="s">&#39;or&#39;</span><span class="p">,</span><span class="s">&#39;this&#39;</span><span class="p">,</span><span class="s">&#39;that&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.SearchEngine.max_in_session">
<tt class="descname">max_in_session</tt><a class="headerlink" href="#stdnet.odm.SearchEngine.max_in_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum number of instances to be reindexed in one session.
Default <tt class="docutils literal"><span class="pre">1000</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.SearchEngine.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#stdnet.odm.SearchEngine.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Backend for this search engine.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.register">
<tt class="descname">register</tt><big>(</big><em>model</em>, <em>related=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> with this search <a class="reference internal" href="#stdnet.odm.SearchEngine" title="stdnet.odm.SearchEngine"><tt class="xref py py-class docutils literal"><span class="pre">SearchEngine</span></tt></a>.
When registering a model, every time an instance is created, it will be
indexed by the search engine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>model</strong> &#8211; a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> class.</li>
<li><strong>related</strong> &#8211; a list of related fields to include in the index.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.words_from_text">
<tt class="descname">words_from_text</tt><big>(</big><em>text</em>, <em>for_search=False</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.words_from_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of indexable words in <em>text</em>.
This functions loop through the <a class="reference internal" href="#stdnet.odm.SearchEngine.word_middleware" title="stdnet.odm.SearchEngine.word_middleware"><tt class="xref py py-attr docutils literal"><span class="pre">word_middleware</span></tt></a> attribute
to process the text.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>text</strong> &#8211; string from which to extract words.</li>
<li><strong>for_search</strong> &#8211; <p>flag indicating if the the words will be used for search
or to index the database. This flug is used in conjunction with the
middleware flag <em>for_search</em>. If this flag is <tt class="docutils literal"><span class="pre">True</span></tt> (i.e. we need to
search the database for the words in <em>text</em>), only the
middleware functions in <a class="reference internal" href="#stdnet.odm.SearchEngine.word_middleware" title="stdnet.odm.SearchEngine.word_middleware"><tt class="xref py py-attr docutils literal"><span class="pre">word_middleware</span></tt></a> enabled for searching are
used.</p>
<p>Default: <tt class="docutils literal"><span class="pre">False</span></tt>.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>return a <em>list</em> of cleaned words.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.split_text">
<tt class="descname">split_text</tt><big>(</big><em>text</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.split_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Split text into words and return an iterable over them.
Can and should be reimplemented by subclasses.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.add_word_middleware">
<tt class="descname">add_word_middleware</tt><big>(</big><em>middleware</em>, <em>for_search=True</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.add_word_middleware" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <em>middleware</em> function to the list of <a class="reference internal" href="#stdnet.odm.SearchEngine.word_middleware" title="stdnet.odm.SearchEngine.word_middleware"><tt class="xref py py-attr docutils literal"><span class="pre">word_middleware</span></tt></a>,
for preprocessing words to be indexed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>middleware</strong> &#8211; a callable receving an iterable over words.</li>
<li><strong>for_search</strong> &#8211; flag indicating if the <em>middleware</em> can be used for the
text to search. Default: <tt class="docutils literal"><span class="pre">True</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.index_item">
<tt class="descname">index_item</tt><big>(</big><em>item</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.index_item" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the main function for indexing items.
It extracts content from the given <em>item</em> and add it to the index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>item</strong> &#8211; an instance of a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.odm.StdModel</span></tt></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.query">
<tt class="descname">query</tt><big>(</big><em>model</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a query for <tt class="docutils literal"><span class="pre">model</span></tt> when it needs to be indexed.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.session">
<tt class="descname">session</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.session" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a session for the search engine</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.index_items_from_model">
<tt class="descname">index_items_from_model</tt><big>(</big><em>items</em>, <em>model</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.index_items_from_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Main method for indexing items.</p>
<p>It extracts content from a list of <tt class="docutils literal"><span class="pre">items</span></tt> belonging to
<tt class="docutils literal"><span class="pre">model</span></tt> and add it to the index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>items</strong> &#8211; an iterable over instances of <tt class="docutils literal"><span class="pre">model</span></tt>.</li>
<li><strong>model</strong> &#8211; The <tt class="docutils literal"><span class="pre">model</span></tt> of all <tt class="docutils literal"><span class="pre">items</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.remove_item">
<tt class="descname">remove_item</tt><big>(</big><em>item_or_model</em>, <em>session</em>, <em>ids=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.remove_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an item from the search indices</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.add_item">
<tt class="descname">add_item</tt><big>(</big><em>item</em>, <em>words</em>, <em>transaction</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.add_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Create indices for <em>item</em> and each word in <em>words</em>. Must be
implemented by subclasses.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>item</strong> &#8211; a <em>model</em> instance to be indexed. It does not need to be
a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.odm.StdModel</span></tt></a>.</li>
<li><strong>words</strong> &#8211; iterable over words. It has been obtained from the
text in <em>item</em> via the <a class="reference internal" href="#stdnet.odm.SearchEngine.word_middleware" title="stdnet.odm.SearchEngine.word_middleware"><tt class="xref py py-attr docutils literal"><span class="pre">word_middleware</span></tt></a>.</li>
<li><strong>transaction</strong> &#8211; The <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.search">
<tt class="descname">search</tt><big>(</big><em>text</em>, <em>include=None</em>, <em>exclude=None</em>, <em>lookup=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Full text search. Must be implemented by subclasses.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>test</strong> &#8211; text to search</li>
<li><strong>include</strong> &#8211; optional list of models to include in the search. If not
provided all <tt class="xref py py-attr docutils literal"><span class="pre">REGISTERED_MODELS</span></tt> will be used.</li>
<li><strong>exclude</strong> &#8211; optional list of models to exclude for the search.</li>
<li><strong>lookup</strong> &#8211; currently not used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.search_model">
<tt class="descname">search_model</tt><big>(</big><em>query</em>, <em>text</em>, <em>lookup=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.search_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Search <em>text</em> in <em>model</em> instances.</p>
<p>This is the functions needing implementation by custom search engines.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>query</strong> &#8211; a <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> on a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a>.</li>
<li><strong>text</strong> &#8211; text to search</li>
<li><strong>lookup</strong> &#8211; Optional lookup, one of <tt class="docutils literal"><span class="pre">contains</span></tt> or <tt class="docutils literal"><span class="pre">in</span></tt>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An updated <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.flush">
<tt class="descname">flush</tt><big>(</big><em>full=False</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean the search engine</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.reindex">
<tt class="descname">reindex</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.reindex" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-index models.</p>
<p>Remove existing indices indexes and rebuilding them by iterating
through all the instances of <tt class="xref py py-attr docutils literal"><span class="pre">REGISTERED_MODELS</span></tt>.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="data-structures">
<span id="model-structures"></span><h2>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h2>
<p>Data structures are subclasses of <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>, which in term is
a subclass of <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>. They are rarely used in stand alone mode,
instead they form the back-end of
<a class="reference internal" href="fields.html#model-field-structure"><em>data structure fields</em></a>.</p>
<p>There are five of them:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#stdnet.odm.List" title="stdnet.odm.List"><tt class="xref py py-class docutils literal"><span class="pre">List</span></tt></a>, implemented as a doubly-linked sequence.</li>
<li><a class="reference internal" href="#stdnet.odm.Set" title="stdnet.odm.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a>, a container of unique values.</li>
<li><a class="reference internal" href="#stdnet.odm.HashTable" title="stdnet.odm.HashTable"><tt class="xref py py-class docutils literal"><span class="pre">HashTable</span></tt></a>, unique associative container.</li>
<li><a class="reference internal" href="#stdnet.odm.Zset" title="stdnet.odm.Zset"><tt class="xref py py-class docutils literal"><span class="pre">Zset</span></tt></a>, an ordered container of unique values.</li>
<li><a class="reference internal" href="#stdnet.odm.TS" title="stdnet.odm.TS"><tt class="xref py py-class docutils literal"><span class="pre">TS</span></tt></a>, a time-series implemented as a ordered unique associative container.</li>
</ul>
</div></blockquote>
<p>An additional structure is provided in the <a class="reference internal" href="../examples/columnts.html#module-stdnet.apps.columnts" title="stdnet.apps.columnts"><tt class="xref py py-mod docutils literal"><span class="pre">stdnet.apps.columnts</span></tt></a> module</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="../examples/columnts.html#stdnet.apps.columnts.ColumnTS" title="stdnet.apps.columnts.ColumnTS"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.apps.columnts.ColumnTS</span></tt></a> a numeric multivariate time-series structure
(useful for modelling financial data for example).</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Stand alone data structures are available for redis back-end only. Usually,
one uses these models via a
<a class="reference internal" href="fields.html#model-field-structure"><em>data-structure fields</em></a>.</p>
</div>
<div class="section" id="creating-structures">
<h3>Creating Structures<a class="headerlink" href="#creating-structures" title="Permalink to this headline">¶</a></h3>
<p>Creating the five structures available in stdnet is accomplished
in the following way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stdnet</span> <span class="kn">import</span> <span class="n">odm</span>

<span class="n">models</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">Router</span><span class="p">(</span><span class="s">&#39;redis://localhost:6379&#39;</span><span class="p">)</span>
<span class="n">li</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">List</span><span class="p">())</span>
</pre></div>
</div>
<p>At this point the <tt class="docutils literal"><span class="pre">li</span></tt> instance is registered with a <tt class="xref py py-class docutils literal"><span class="pre">Router</span></tt> and the
session API can be used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="n">models</span><span class="o">.</span><span class="n">session</span><span class="p">()</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>
    <span class="n">t</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
    <span class="n">li</span><span class="o">.</span><span class="n">push_back</span><span class="p">(</span><span class="s">&#39;bla&#39;</span><span class="p">)</span>
    <span class="n">li</span><span class="o">.</span><span class="n">push_back</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If no <tt class="docutils literal"><span class="pre">id</span></tt> is specified, stdnet will create one for you:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">id</span>
<span class="go">&#39;2d0cbac9&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="base-class-and-mixins">
<h3>Base Class and Mixins<a class="headerlink" href="#base-class-and-mixins" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Structure">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Structure</tt><big>(</big><em>value_pickler=None</em>, <em>name=''</em>, <em>field=False</em>, <em>session=None</em>, <em>pkvalue=None</em>, <em>id=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Structure" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> for remote data-structures.</p>
<p>Remote structures are the backend of
<a class="reference internal" href="fields.html#model-field-structure"><em>structured fields</em></a> but they
can also be used as stand alone objects. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">stdnet</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">stdnet</span><span class="o">.</span><span class="n">getdb</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">mylist</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="s">&#39;bla&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="stdnet.odm.Structure.cache">
<tt class="descname">cache</tt><a class="headerlink" href="#stdnet.odm.Structure.cache" title="Permalink to this definition">¶</a></dt>
<dd><p>A python <a class="reference internal" href="#stdnet.odm.StructureCache" title="stdnet.odm.StructureCache"><tt class="xref py py-class docutils literal"><span class="pre">StructureCache</span></tt></a> for this <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>.
The <a class="reference internal" href="#stdnet.odm.Structure.cache" title="stdnet.odm.Structure.cache"><tt class="xref py py-attr docutils literal"><span class="pre">cache</span></tt></a> is used when adding or removing data via
<a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> as well as
for storing the results obtained form a call to <a class="reference internal" href="#stdnet.odm.Structure.items" title="stdnet.odm.Structure.items"><tt class="xref py py-meth docutils literal"><span class="pre">items()</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Structure.value_pickler">
<tt class="descname">value_pickler</tt><a class="headerlink" href="#stdnet.odm.Structure.value_pickler" title="Permalink to this definition">¶</a></dt>
<dd><p>Class used for serialize and unserialize values.
If <tt class="docutils literal"><span class="pre">None</span></tt> the <a class="reference internal" href="utility.html#stdnet.utils.encoders.NumericDefault" title="stdnet.utils.encoders.NumericDefault"><tt class="xref py py-attr docutils literal"><span class="pre">stdnet.utils.encoders.NumericDefault</span></tt></a>
will be used.</p>
<p>Default <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Structure.field">
<tt class="descname">field</tt><a class="headerlink" href="#stdnet.odm.Structure.field" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="fields.html#stdnet.odm.StructureField" title="stdnet.odm.StructureField"><tt class="xref py py-class docutils literal"><span class="pre">StructureField</span></tt></a> which this owns this <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>.
Default <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Structure.model">
<tt class="descname">model</tt><a class="headerlink" href="#stdnet.odm.Structure.model" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> which contains the <a class="reference internal" href="#stdnet.odm.Structure.field" title="stdnet.odm.Structure.field"><tt class="xref py py-attr docutils literal"><span class="pre">field</span></tt></a> of this
<a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>. Only available if <a class="reference internal" href="#stdnet.odm.Structure.field" title="stdnet.odm.Structure.field"><tt class="xref py py-attr docutils literal"><span class="pre">field</span></tt></a> is defined.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Structure.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#stdnet.odm.Structure.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the <a class="reference internal" href="../backends/api.html#stdnet.BackendStructure" title="stdnet.BackendStructure"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendStructure</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Structure.read_backend">
<tt class="descname">read_backend</tt><a class="headerlink" href="#stdnet.odm.Structure.read_backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the <a class="reference internal" href="../backends/api.html#stdnet.BackendStructure" title="stdnet.BackendStructure"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendStructure</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Structure.size">
<tt class="descname">size</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Structure.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of elements in the <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Structure.items">
<tt class="descname">items</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Structure.items" title="Permalink to this definition">¶</a></dt>
<dd><p>All items of this <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>. Implemented by subclasses.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Structure.load_data">
<tt class="descname">load_data</tt><big>(</big><em>data</em>, <em>callback=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Structure.load_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Load <tt class="docutils literal"><span class="pre">data</span></tt> from the <a class="reference internal" href="../backends/api.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Structure.backend_structure">
<tt class="descname">backend_structure</tt><big>(</big><em>client=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Structure.backend_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the <a class="reference internal" href="../backends/api.html#stdnet.BackendStructure" title="stdnet.BackendStructure"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendStructure</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Structure.read_backend_structure">
<tt class="descname">read_backend_structure</tt><big>(</big><em>client=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Structure.read_backend_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the <a class="reference internal" href="../backends/api.html#stdnet.BackendStructure" title="stdnet.BackendStructure"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendStructure</span></tt></a> for reading.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stdnet.odm.Sequence">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Sequence</tt><a class="headerlink" href="#stdnet.odm.Sequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin for a <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a> which implements a kind of sequence
container. The elements in a sequence container are ordered following a linear
sequence.</p>
<dl class="method">
<dt id="stdnet.odm.Sequence.push_back">
<tt class="descname">push_back</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Sequence.push_back" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends a copy of <em>value</em> at the end of the <a class="reference internal" href="#stdnet.odm.Sequence" title="stdnet.odm.Sequence"><tt class="xref py py-class docutils literal"><span class="pre">Sequence</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Sequence.pop_back">
<tt class="descname">pop_back</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Sequence.pop_back" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the last element from the <a class="reference internal" href="#stdnet.odm.Sequence" title="stdnet.odm.Sequence"><tt class="xref py py-class docutils literal"><span class="pre">Sequence</span></tt></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stdnet.odm.PairMixin">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">PairMixin</tt><a class="headerlink" href="#stdnet.odm.PairMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>A mixin for structures with which holds pairs. It is the parent class
of <a class="reference internal" href="#stdnet.odm.KeyValueMixin" title="stdnet.odm.KeyValueMixin"><tt class="xref py py-class docutils literal"><span class="pre">KeyValueMixin</span></tt></a> and it is used as base class for the ordered set
structure <a class="reference internal" href="#stdnet.odm.Zset" title="stdnet.odm.Zset"><tt class="xref py py-class docutils literal"><span class="pre">Zset</span></tt></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.PairMixin.pickler">
<tt class="descname">pickler</tt><a class="headerlink" href="#stdnet.odm.PairMixin.pickler" title="Permalink to this definition">¶</a></dt>
<dd><p>An <a class="reference internal" href="utility.html#encoders"><em>encoder</em></a> for the additional value in the pair.
The additional value is a field key for <tt class="xref py py-class docutils literal"><span class="pre">Hashtable</span></tt>,
a numeric score for <a class="reference internal" href="#stdnet.odm.Zset" title="stdnet.odm.Zset"><tt class="xref py py-class docutils literal"><span class="pre">Zset</span></tt></a> and a tim value for <a class="reference internal" href="#stdnet.odm.TS" title="stdnet.odm.TS"><tt class="xref py py-class docutils literal"><span class="pre">TS</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.PairMixin.items">
<tt class="descname">items</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.PairMixin.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterator over items (pairs) of <a class="reference internal" href="#stdnet.odm.PairMixin" title="stdnet.odm.PairMixin"><tt class="xref py py-class docutils literal"><span class="pre">PairMixin</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.PairMixin.values">
<tt class="descname">values</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.PairMixin.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Iteratir over values of <a class="reference internal" href="#stdnet.odm.PairMixin" title="stdnet.odm.PairMixin"><tt class="xref py py-class docutils literal"><span class="pre">PairMixin</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.PairMixin.pair">
<tt class="descname">pair</tt><big>(</big><em>pair</em><big>)</big><a class="headerlink" href="#stdnet.odm.PairMixin.pair" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <em>pair</em> to the structure.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.PairMixin.update">
<tt class="descname">update</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.PairMixin.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Add <em>mapping</em> dictionary to hashtable.
Equivalent to python dictionary update method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>mapping</strong> &#8211; a dictionary of field values.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stdnet.odm.KeyValueMixin">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">KeyValueMixin</tt><a class="headerlink" href="#stdnet.odm.KeyValueMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>A mixin for ordered and unordered key-valued pair containers.
A key-value pair container has the <tt class="xref py py-meth docutils literal"><span class="pre">values()</span></tt> and <tt class="xref py py-meth docutils literal"><span class="pre">items()</span></tt>
methods, while its iterator is over keys.</p>
<dl class="method">
<dt id="stdnet.odm.KeyValueMixin.get">
<tt class="descname">get</tt><big>(</big><em>key</em>, <em>default=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.KeyValueMixin.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single element from the structure.
If the element is not available return the default value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> &#8211; lookup field</li>
<li><strong>default</strong> &#8211; default value when the field is not available</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.KeyValueMixin.remove">
<tt class="descname">remove</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.KeyValueMixin.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove <em>keys</em> from the key-value container.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stdnet.odm.OrderedMixin">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">OrderedMixin</tt><a class="headerlink" href="#stdnet.odm.OrderedMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>A mixin for a <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a> which maintains ordering with respect
a numeric value, the score.</p>
<dl class="method">
<dt id="stdnet.odm.OrderedMixin.front">
<tt class="descname">front</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.front" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the front pair of the structure</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.OrderedMixin.back">
<tt class="descname">back</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.back" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the back pair of the structure</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.OrderedMixin.count">
<tt class="descname">count</tt><big>(</big><em>start</em>, <em>stop</em><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of elements bewteen <em>start</em> and <em>stop</em>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.OrderedMixin.range">
<tt class="descname">range</tt><big>(</big><em>start</em>, <em>stop</em>, <em>callback=None</em>, <em>withscores=True</em>, <em>**options</em><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.range" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a range with scores between start and end.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.OrderedMixin.irange">
<tt class="descname">irange</tt><big>(</big><em>start=0</em>, <em>end=-1</em>, <em>callback=None</em>, <em>withscores=True</em>, <em>**options</em><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.irange" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the range by rank between start and end.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.OrderedMixin.pop_range">
<tt class="descname">pop_range</tt><big>(</big><em>start</em>, <em>stop</em>, <em>callback=None</em>, <em>withscores=True</em><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.pop_range" title="Permalink to this definition">¶</a></dt>
<dd><p>pop a range by score from the <a class="reference internal" href="#stdnet.odm.OrderedMixin" title="stdnet.odm.OrderedMixin"><tt class="xref py py-class docutils literal"><span class="pre">OrderedMixin</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.OrderedMixin.ipop_range">
<tt class="descname">ipop_range</tt><big>(</big><em>start=0</em>, <em>stop=-1</em>, <em>callback=None</em>, <em>withscores=True</em><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.ipop_range" title="Permalink to this definition">¶</a></dt>
<dd><p>pop a range from the <a class="reference internal" href="#stdnet.odm.OrderedMixin" title="stdnet.odm.OrderedMixin"><tt class="xref py py-class docutils literal"><span class="pre">OrderedMixin</span></tt></a></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stdnet.odm.StructureCache">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">StructureCache</tt><a class="headerlink" href="#stdnet.odm.StructureCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface for all <a class="reference internal" href="#stdnet.odm.Structure.cache" title="stdnet.odm.Structure.cache"><tt class="xref py py-attr docutils literal"><span class="pre">Structure.cache</span></tt></a> classes.</p>
<dl class="method">
<dt id="stdnet.odm.StructureCache.clear">
<tt class="descname">clear</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.StructureCache.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cache for data</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="list">
<h3>List<a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.List">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">List</tt><big>(</big><em>value_pickler=None</em>, <em>name=''</em>, <em>field=False</em>, <em>session=None</em>, <em>pkvalue=None</em>, <em>id=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.List" title="Permalink to this definition">¶</a></dt>
<dd><p>A doubly-linked list <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>. It expands the
<a class="reference internal" href="#stdnet.odm.Sequence" title="stdnet.odm.Sequence"><tt class="xref py py-class docutils literal"><span class="pre">Sequence</span></tt></a> mixin with functionalities to add and remove from
the front of the list in an efficient manner.</p>
<dl class="method">
<dt id="stdnet.odm.List.pop_front">
<tt class="descname">pop_front</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.List.pop_front" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the first element from of the list.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.List.block_pop_back">
<tt class="descname">block_pop_back</tt><big>(</big><em>timeout=10</em><big>)</big><a class="headerlink" href="#stdnet.odm.List.block_pop_back" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the last element from of the list. If no elements are
available, blocks for at least <tt class="docutils literal"><span class="pre">timeout</span></tt> seconds.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.List.block_pop_front">
<tt class="descname">block_pop_front</tt><big>(</big><em>timeout=10</em><big>)</big><a class="headerlink" href="#stdnet.odm.List.block_pop_front" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the first element from of the list. If no elements are
available, blocks for at least <tt class="docutils literal"><span class="pre">timeout</span></tt> seconds.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.List.push_front">
<tt class="descname">push_front</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.List.push_front" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends a copy of <tt class="docutils literal"><span class="pre">value</span></tt> to the beginning of the list.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="set">
<h3>Set<a class="headerlink" href="#set" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Set">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Set</tt><big>(</big><em>value_pickler=None</em>, <em>name=''</em>, <em>field=False</em>, <em>session=None</em>, <em>pkvalue=None</em>, <em>id=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Set" title="Permalink to this definition">¶</a></dt>
<dd><p>An unordered set <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>. Equivalent to a python <tt class="docutils literal"><span class="pre">set</span></tt>.</p>
<dl class="method">
<dt id="stdnet.odm.Set.add">
<tt class="descname">add</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Set.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add <em>value</em> to the set</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Set.update">
<tt class="descname">update</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Set.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Add iterable <em>values</em> to the set</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Set.discard">
<tt class="descname">discard</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Set.discard" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an element <em>value</em> from a set if it is a member.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Set.remove">
<tt class="descname">remove</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Set.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an element <em>value</em> from a set if it is a member.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Set.difference_update">
<tt class="descname">difference_update</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Set.difference_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an iterable of <em>values</em> from the set.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="orderedset">
<span id="orderedset-structure"></span><h3>OrderedSet<a class="headerlink" href="#orderedset" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Zset">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Zset</tt><big>(</big><em>value_pickler=None</em>, <em>name=''</em>, <em>field=False</em>, <em>session=None</em>, <em>pkvalue=None</em>, <em>id=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Zset" title="Permalink to this definition">¶</a></dt>
<dd><p>An ordered version of <a class="reference internal" href="#stdnet.odm.Set" title="stdnet.odm.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a>. It derives from
<a class="reference internal" href="#stdnet.odm.OrderedMixin" title="stdnet.odm.OrderedMixin"><tt class="xref py py-class docutils literal"><span class="pre">OrderedMixin</span></tt></a> and <a class="reference internal" href="#stdnet.odm.PairMixin" title="stdnet.odm.PairMixin"><tt class="xref py py-class docutils literal"><span class="pre">PairMixin</span></tt></a>.</p>
<dl class="method">
<dt id="stdnet.odm.Zset.rank">
<tt class="descname">rank</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#stdnet.odm.Zset.rank" title="Permalink to this definition">¶</a></dt>
<dd><p>The rank of a given <em>value</em>. This is the position of <em>value</em>
in the <a class="reference internal" href="#stdnet.odm.OrderedMixin" title="stdnet.odm.OrderedMixin"><tt class="xref py py-class docutils literal"><span class="pre">OrderedMixin</span></tt></a> container.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="hashtable">
<span id="hash-structure"></span><h3>HashTable<a class="headerlink" href="#hashtable" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.HashTable">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">HashTable</tt><big>(</big><em>value_pickler=None</em>, <em>name=''</em>, <em>field=False</em>, <em>session=None</em>, <em>pkvalue=None</em>, <em>id=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.HashTable" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a> which is the networked equivalent to
a Python <tt class="docutils literal"><span class="pre">dict</span></tt>. Derives from <a class="reference internal" href="#stdnet.odm.KeyValueMixin" title="stdnet.odm.KeyValueMixin"><tt class="xref py py-class docutils literal"><span class="pre">KeyValueMixin</span></tt></a>.</p>
</dd></dl>

</div>
<div class="section" id="ts">
<h3>TS<a class="headerlink" href="#ts" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.TS">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">TS</tt><big>(</big><em>value_pickler=None</em>, <em>name=''</em>, <em>field=False</em>, <em>session=None</em>, <em>pkvalue=None</em>, <em>id=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.TS" title="Permalink to this definition">¶</a></dt>
<dd><p>A timeseries is a <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a> which derives from
<a class="reference internal" href="#stdnet.odm.OrderedMixin" title="stdnet.odm.OrderedMixin"><tt class="xref py py-class docutils literal"><span class="pre">OrderedMixin</span></tt></a> and <a class="reference internal" href="#stdnet.odm.KeyValueMixin" title="stdnet.odm.KeyValueMixin"><tt class="xref py py-class docutils literal"><span class="pre">KeyValueMixin</span></tt></a>.
It represents an ordered associative container where keys are timestamps
and values are objects.</p>
<dl class="method">
<dt id="stdnet.odm.TS.rank">
<tt class="descname">rank</tt><big>(</big><em>dte</em><big>)</big><a class="headerlink" href="#stdnet.odm.TS.rank" title="Permalink to this definition">¶</a></dt>
<dd><p>The rank of a given <em>dte</em> in the timeseries</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.TS.ipop">
<tt class="descname">ipop</tt><big>(</big><em>index</em><big>)</big><a class="headerlink" href="#stdnet.odm.TS.ipop" title="Permalink to this definition">¶</a></dt>
<dd><p>Pop a value at <em>index</em> from the <a class="reference internal" href="#stdnet.odm.TS" title="stdnet.odm.TS"><tt class="xref py py-class docutils literal"><span class="pre">TS</span></tt></a>. Return <tt class="docutils literal"><span class="pre">None</span></tt> if
index is not out of bound.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.TS.times">
<tt class="descname">times</tt><big>(</big><em>start</em>, <em>stop</em>, <em>callback=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.TS.times" title="Permalink to this definition">¶</a></dt>
<dd><p>The times between times <em>start</em> and <em>stop</em>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.TS.itimes">
<tt class="descname">itimes</tt><big>(</big><em>start=0</em>, <em>stop=-1</em>, <em>callback=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.TS.itimes" title="Permalink to this definition">¶</a></dt>
<dd><p>The times between rank <em>start</em> and <em>stop</em>.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="sessions">
<h2>Sessions<a class="headerlink" href="#sessions" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> is the middleware between a <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> and
a <a class="reference internal" href="../backends/api.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a>. It is obtained from either the
<tt class="xref py py-meth docutils literal"><span class="pre">Router.session()</span></tt> or, equivalently, from the <a class="reference internal" href="#stdnet.odm.Manager.session" title="stdnet.odm.Manager.session"><tt class="xref py py-meth docutils literal"><span class="pre">Manager.session()</span></tt></a>.
A <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> is an holding zone for <a class="reference internal" href="#stdnet.odm.SessionModel" title="stdnet.odm.SessionModel"><tt class="xref py py-class docutils literal"><span class="pre">SessionModel</span></tt></a> and it
communicates with the <a class="reference internal" href="../backends/api.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> via <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a>.</p>
<div class="section" id="session">
<h3>Session<a class="headerlink" href="#session" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Session">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Session</tt><big>(</big><em>router</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session" title="Permalink to this definition">¶</a></dt>
<dd><p>The middleware for persistent operations on the back-end.</p>
<blockquote>
<div>It is created via the <tt class="xref py py-meth docutils literal"><span class="pre">Mapper.session()</span></tt> method.</div></blockquote>
<dl class="attribute">
<dt id="stdnet.odm.Session.transaction">
<tt class="descname">transaction</tt><a class="headerlink" href="#stdnet.odm.Session.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> instance. Not <tt class="docutils literal"><span class="pre">None</span></tt> if this <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>
is in a <a class="reference internal" href="../examples/sessions.html#transactional-state"><em>transactional state</em></a></p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Session.router">
<tt class="descname">router</tt><a class="headerlink" href="#stdnet.odm.Session.router" title="Permalink to this definition">¶</a></dt>
<dd><p>Instance of the <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> which created this <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Session.dirty">
<tt class="descname">dirty</tt><a class="headerlink" href="#stdnet.odm.Session.dirty" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of instances in this <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> which have
been modified.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.begin">
<tt class="descname">begin</tt><big>(</big><em>**options</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a new <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a>. If this <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>
is already in a <a class="reference internal" href="../examples/sessions.html#transactional-state"><em>transactional state</em></a>,
an error will occur. It returns the <a class="reference internal" href="#stdnet.odm.Session.transaction" title="stdnet.odm.Session.transaction"><tt class="xref py py-attr docutils literal"><span class="pre">transaction</span></tt></a> attribute.</p>
<p>This method is mostly used within a <tt class="docutils literal"><span class="pre">with</span></tt> statement block:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>
    <span class="n">t</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>which is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">options</span></tt> parameters are passed to the <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> constructor.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.commit">
<tt class="descname">commit</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Session.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the current <a class="reference internal" href="#stdnet.odm.Session.transaction" title="stdnet.odm.Session.transaction"><tt class="xref py py-attr docutils literal"><span class="pre">transaction</span></tt></a>.</p>
<p>If no transaction is in progress, this method open one.
Rarely used directly, see the <a class="reference internal" href="#stdnet.odm.Session.begin" title="stdnet.odm.Session.begin"><tt class="xref py py-meth docutils literal"><span class="pre">begin()</span></tt></a> method for details on
how to start and close a transaction using the <cite>with</cite> construct.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.query">
<tt class="descname">query</tt><big>(</big><em>model</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> for <em>model</em>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.empty">
<tt class="descname">empty</tt><big>(</big><em>model</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an empty <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> for <tt class="docutils literal"><span class="pre">model</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.update_or_create">
<tt class="descname">update_or_create</tt><big>(</big><em>model</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.update_or_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Update or create a new instance of <tt class="docutils literal"><span class="pre">model</span></tt>.</p>
<p>This method can raise an exception if the <tt class="docutils literal"><span class="pre">kwargs</span></tt> dictionary
contains field data that does not validate.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model</strong> &#8211; a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a></li>
<li><strong>kwargs</strong> &#8211; dictionary of parameters.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A two elements tuple containing the instance and a boolean
indicating if the instance was created or not.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.add">
<tt class="descname">add</tt><big>(</big><em>instance</em>, <em>modified=True</em>, <em>**params</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an <tt class="docutils literal"><span class="pre">instance</span></tt> to the session.</p>
<p>If the session is not in a
<a class="reference internal" href="../examples/sessions.html#transactional-state"><em>transactional state</em></a>, this operation
commits changes to the back-end server immediately.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>instance</strong> &#8211; a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> instance. It must be registered
with the <a class="reference internal" href="#stdnet.odm.Session.router" title="stdnet.odm.Session.router"><tt class="xref py py-attr docutils literal"><span class="pre">router</span></tt></a> which created this <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>.</li>
<li><strong>modified</strong> &#8211; a boolean flag indicating if the instance was
modified.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the <tt class="docutils literal"><span class="pre">instance</span></tt>.</p>
</td>
</tr>
</tbody>
</table>
<p>If the instance is persistent (it is already stored in the database),
an updated will be performed, otherwise a new entry will be created
once the <a class="reference internal" href="#stdnet.odm.Session.commit" title="stdnet.odm.Session.commit"><tt class="xref py py-meth docutils literal"><span class="pre">commit()</span></tt></a> method is invoked.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.delete">
<tt class="descname">delete</tt><big>(</big><em>instance_or_query</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an <tt class="docutils literal"><span class="pre">instance</span></tt> or a <tt class="docutils literal"><span class="pre">query</span></tt>.</p>
<p>Adds <tt class="docutils literal"><span class="pre">instance_or_query</span></tt> to this <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> list
of data to be deleted. If the session is not in a
<a class="reference internal" href="../examples/sessions.html#transactional-state"><em>transactional state</em></a>, this operation
commits changes to the backend server immediately.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>instance_or_query</strong> &#8211; a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> instance or
a <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.flush">
<tt class="descname">flush</tt><big>(</big><em>model</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Completely flush a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> from the database. No keys
associated with the model will exists after this operation.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.clean">
<tt class="descname">clean</tt><big>(</big><em>model</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove empty keys for a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> from the database. No
empty keys associated with the model will exists after this operation.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.keys">
<tt class="descname">keys</tt><big>(</big><em>model</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve all keys for a <em>model</em>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.model">
<tt class="descname">model</tt><big>(</big><em>model</em>, <em>create=True</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.model" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the <a class="reference internal" href="#stdnet.odm.SessionModel" title="stdnet.odm.SessionModel"><tt class="xref py py-class docutils literal"><span class="pre">SessionModel</span></tt></a> for <tt class="docutils literal"><span class="pre">model</span></tt> which
can be <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>, or a <tt class="xref py py-class docutils literal"><span class="pre">MetaClass</span></tt>, or an instance
of <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.expunge">
<tt class="descname">expunge</tt><big>(</big><em>instance=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.expunge" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove <tt class="docutils literal"><span class="pre">instance</span></tt> from this <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>. If <tt class="docutils literal"><span class="pre">instance</span></tt>
is not given, it removes all instances from this <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.manager">
<tt class="descname">manager</tt><big>(</big><em>model</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> for <tt class="docutils literal"><span class="pre">model</span></tt> which can be any of the
values valid for the <a class="reference internal" href="#stdnet.odm.Session.model" title="stdnet.odm.Session.model"><tt class="xref py py-meth docutils literal"><span class="pre">model()</span></tt></a> method.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="session-model">
<h3>Session Model<a class="headerlink" href="#session-model" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.SessionModel">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">SessionModel</tt><big>(</big><em>manager</em><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.SessionModel" title="stdnet.odm.SessionModel"><tt class="xref py py-class docutils literal"><span class="pre">SessionModel</span></tt></a> is the container of all objects for a given
<a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> in a stdnet <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.SessionModel.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#stdnet.odm.SessionModel.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>The backend for this <a class="reference internal" href="#stdnet.odm.SessionModel" title="stdnet.odm.SessionModel"><tt class="xref py py-class docutils literal"><span class="pre">SessionModel</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.SessionModel.read_backend">
<tt class="descname">read_backend</tt><a class="headerlink" href="#stdnet.odm.SessionModel.read_backend" title="Permalink to this definition">¶</a></dt>
<dd><p>The read-only backend for this <a class="reference internal" href="#stdnet.odm.SessionModel" title="stdnet.odm.SessionModel"><tt class="xref py py-class docutils literal"><span class="pre">SessionModel</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.SessionModel.model">
<tt class="descname">model</tt><a class="headerlink" href="#stdnet.odm.SessionModel.model" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> for this <a class="reference internal" href="#stdnet.odm.SessionModel" title="stdnet.odm.SessionModel"><tt class="xref py py-class docutils literal"><span class="pre">SessionModel</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.SessionModel.new">
<tt class="descname">new</tt><a class="headerlink" href="#stdnet.odm.SessionModel.new" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all new instances within this <tt class="docutils literal"><span class="pre">SessionModel</span></tt>. This
instances will be inserted in the database.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.SessionModel.modified">
<tt class="descname">modified</tt><a class="headerlink" href="#stdnet.odm.SessionModel.modified" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all modified instances within this <tt class="docutils literal"><span class="pre">Session</span></tt>. This
instances will.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.SessionModel.deleted">
<tt class="descname">deleted</tt><a class="headerlink" href="#stdnet.odm.SessionModel.deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instance pks marked as <cite>deleted</cite> within this
<a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.SessionModel.dirty">
<tt class="descname">dirty</tt><a class="headerlink" href="#stdnet.odm.SessionModel.dirty" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances which have changed, but not deleted,
within this <a class="reference internal" href="#stdnet.odm.SessionModel" title="stdnet.odm.SessionModel"><tt class="xref py py-class docutils literal"><span class="pre">SessionModel</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.iterdirty">
<tt class="descname">iterdirty</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.iterdirty" title="Permalink to this definition">¶</a></dt>
<dd><p>Ordered iterator over dirty elements.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.add">
<tt class="descname">add</tt><big>(</big><em>instance</em>, <em>modified=True</em>, <em>persistent=None</em>, <em>force_update=False</em><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new instance to this <a class="reference internal" href="#stdnet.odm.SessionModel" title="stdnet.odm.SessionModel"><tt class="xref py py-class docutils literal"><span class="pre">SessionModel</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>modified</strong> &#8211; Optional flag indicating if the <tt class="docutils literal"><span class="pre">instance</span></tt> has been
modified. By default its value is <tt class="docutils literal"><span class="pre">True</span></tt>.</li>
<li><strong>force_update</strong> &#8211; if <tt class="docutils literal"><span class="pre">instance</span></tt> is persistent, it forces an update of the
data rather than a full replacement. This is used by the
<tt class="xref py py-meth docutils literal"><span class="pre">insert_update_replace()</span></tt> method.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">The instance added to the session</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.delete">
<tt class="descname">delete</tt><big>(</big><em>instance</em>, <em>session</em><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>delete an <em>instance</em></p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.pop">
<tt class="descname">pop</tt><big>(</big><em>instance</em><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove <tt class="docutils literal"><span class="pre">instance</span></tt> from the <a class="reference internal" href="#stdnet.odm.SessionModel" title="stdnet.odm.SessionModel"><tt class="xref py py-class docutils literal"><span class="pre">SessionModel</span></tt></a>. Instance
could be a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> or an id.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>instance</strong> &#8211; a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> or an <tt class="docutils literal"><span class="pre">id</span></tt>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">the <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> removed from session or <tt class="docutils literal"><span class="pre">None</span></tt> if
it was not in the session.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.expunge">
<tt class="descname">expunge</tt><big>(</big><em>instance</em><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.expunge" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove <em>instance</em> from the <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>. Instance could be a
<a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> or an id.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>instance</strong> &#8211; a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> or an <em>id</em></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">the <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> removed from session or <tt class="docutils literal"><span class="pre">None</span></tt> if
it was not in the session.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.post_commit">
<tt class="descname">post_commit</tt><big>(</big><em>results</em><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.post_commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Process results after a commit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>results</strong> &#8211; iterator over <tt class="xref py py-class docutils literal"><span class="pre">stdnet.instance_session_result</span></tt>
items.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">a two elements tuple containing a list of instances saved and
a list of ids of instances deleted.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.flush">
<tt class="descname">flush</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Completely flush <a class="reference internal" href="#stdnet.odm.SessionModel.model" title="stdnet.odm.SessionModel.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a> from the database. No keys
associated with the model will exists after this operation.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.clean">
<tt class="descname">clean</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove empty keys for a <a class="reference internal" href="#stdnet.odm.SessionModel.model" title="stdnet.odm.SessionModel.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a> from the database. No
empty keys associated with the model will exists after this operation.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.keys">
<tt class="descname">keys</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve all keys for a <a class="reference internal" href="#stdnet.odm.SessionModel.model" title="stdnet.odm.SessionModel.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a>. Uses the
<a class="reference internal" href="#stdnet.odm.Manager.read_backend" title="stdnet.odm.Manager.read_backend"><tt class="xref py py-attr docutils literal"><span class="pre">Manager.read_backend</span></tt></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="transaction">
<h3>Transaction<a class="headerlink" href="#transaction" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Transaction">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Transaction</tt><big>(</big><em>session</em>, <em>name=None</em>, <em>signal_commit=True</em>, <em>signal_delete=True</em><big>)</big><a class="headerlink" href="#stdnet.odm.Transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Transaction class for pipelining commands to the backend server.
An instance of this class is usually obtained via the <a class="reference internal" href="#stdnet.odm.Session.begin" title="stdnet.odm.Session.begin"><tt class="xref py py-meth docutils literal"><span class="pre">Session.begin()</span></tt></a>
or the <tt class="xref py py-meth docutils literal"><span class="pre">Manager.transaction()</span></tt> methods:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
</pre></div>
</div>
<p>or using the <tt class="docutils literal"><span class="pre">with</span></tt> context manager:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p><strong>ATTRIBUTES</strong></p>
<dl class="attribute">
<dt id="stdnet.odm.Transaction.session">
<tt class="descname">session</tt><a class="headerlink" href="#stdnet.odm.Transaction.session" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> which is being transacted.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Transaction.name">
<tt class="descname">name</tt><a class="headerlink" href="#stdnet.odm.Transaction.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> name</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Transaction.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#stdnet.odm.Transaction.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="../backends/api.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> to which the transaction
is being performed.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Transaction.signal_commit">
<tt class="descname">signal_commit</tt><a class="headerlink" href="#stdnet.odm.Transaction.signal_commit" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="docutils literal"><span class="pre">True</span></tt>, a signal for each model in the transaction is triggered
just after changes are committed.
The signal carries a list of updated <tt class="docutils literal"><span class="pre">instances</span></tt> of the model,
the <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> and the <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> itself.</p>
<p>default <tt class="docutils literal"><span class="pre">True</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Transaction.signal_delete">
<tt class="descname">signal_delete</tt><a class="headerlink" href="#stdnet.odm.Transaction.signal_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="docutils literal"><span class="pre">True</span></tt> a signal for each model in the transaction is triggered
just after deletion of instances.
The signal carries the list <tt class="docutils literal"><span class="pre">ids</span></tt> of deleted instances of the mdoel,
the <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> and the <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> itself.</p>
<p>default <tt class="docutils literal"><span class="pre">True</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Transaction.deleted">
<tt class="descname">deleted</tt><a class="headerlink" href="#stdnet.odm.Transaction.deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of list of ids deleted from the backend server after a
commit operation. This dictionary is only available once the
transaction has <tt class="xref py py-attr docutils literal"><span class="pre">finished</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Transaction.saved">
<tt class="descname">saved</tt><a class="headerlink" href="#stdnet.odm.Transaction.saved" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of list of ids saved in the backend server after a commit
operation. This dictionary is only available once the transaction has
<tt class="xref py py-attr docutils literal"><span class="pre">finished</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Transaction.executed">
<tt class="descname">executed</tt><a class="headerlink" href="#stdnet.odm.Transaction.executed" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="docutils literal"><span class="pre">True</span></tt> when this transaction has been executed.</p>
<p>A transaction can be executed once only via the <a class="reference internal" href="#stdnet.odm.Transaction.commit" title="stdnet.odm.Transaction.commit"><tt class="xref py py-meth docutils literal"><span class="pre">commit()</span></tt></a> method.
An executed transaction if <tt class="xref py py-attr docutils literal"><span class="pre">finished</span></tt> once a response from the
backend server has been processed.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Transaction.add">
<tt class="descname">add</tt><big>(</big><em>instance</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Transaction.add" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience proxy for <a class="reference internal" href="#stdnet.odm.Session.add" title="stdnet.odm.Session.add"><tt class="xref py py-meth docutils literal"><span class="pre">Session.add()</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Transaction.delete">
<tt class="descname">delete</tt><big>(</big><em>instance</em><big>)</big><a class="headerlink" href="#stdnet.odm.Transaction.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience proxy for <a class="reference internal" href="#stdnet.odm.Session.delete" title="stdnet.odm.Session.delete"><tt class="xref py py-meth docutils literal"><span class="pre">Session.delete()</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Transaction.expunge">
<tt class="descname">expunge</tt><big>(</big><em>instance=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Transaction.expunge" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience proxy for <a class="reference internal" href="#stdnet.odm.Session.expunge" title="stdnet.odm.Session.expunge"><tt class="xref py py-meth docutils literal"><span class="pre">Session.expunge()</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Transaction.query">
<tt class="descname">query</tt><big>(</big><em>model</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Transaction.query" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience proxy for <a class="reference internal" href="#stdnet.odm.Session.query" title="stdnet.odm.Session.query"><tt class="xref py py-meth docutils literal"><span class="pre">Session.query()</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Transaction.model">
<tt class="descname">model</tt><big>(</big><em>model</em><big>)</big><a class="headerlink" href="#stdnet.odm.Transaction.model" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience proxy for <a class="reference internal" href="#stdnet.odm.Session.model" title="stdnet.odm.Session.model"><tt class="xref py py-meth docutils literal"><span class="pre">Session.model()</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Transaction.commit">
<tt class="descname">commit</tt><big>(</big><em>callback=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Transaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the transaction and commit session to the backend.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="managers">
<h2>Managers<a class="headerlink" href="#managers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="manager">
<h3>Manager<a class="headerlink" href="#manager" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Manager">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Manager</tt><big>(</big><em>model</em>, <em>backend=None</em>, <em>read_backend=None</em>, <em>router=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Before a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> can be used in conjunction
with a <a class="reference internal" href="../backends/index.html#db-index"><em>backend server</em></a>, a <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> must be associated
with it via a <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt>. Check the
<a class="reference internal" href="../examples/registration.html#tutorial-registration"><em>registration tutorial</em></a> for further info:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">StdModel</span><span class="p">):</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">SymbolField</span><span class="p">()</span>
    <span class="n">flag</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">()</span>

<span class="n">models</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">Mapper</span><span class="p">()</span>
<span class="n">models</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>

<span class="n">manager</span> <span class="o">=</span> <span class="n">models</span><span class="p">[</span><span class="n">MyModel</span><span class="p">]</span>
</pre></div>
</div>
<p>Managers are used as <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> and <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> factories
for a given <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">session</span> <span class="o">=</span> <span class="n">router</span><span class="p">[</span><span class="n">MyModel</span><span class="p">]</span><span class="o">.</span><span class="n">session</span><span class="p">()</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">router</span><span class="p">[</span><span class="n">MyModel</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
</pre></div>
</div>
<p>A model can specify a <a class="reference internal" href="../examples/registration.html#custom-manager"><em>custom manager</em></a> by
creating a <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> subclass with additional methods:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModelManager</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">special_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>At this point we need to tell the model about the custom manager, and we do
so by setting the <tt class="docutils literal"><span class="pre">manager_class</span></tt> attribute in the <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">StdModel</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="n">manager_class</span> <span class="o">=</span> <span class="n">MyModelManager</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="stdnet.odm.Manager.model">
<tt class="descname">model</tt><a class="headerlink" href="#stdnet.odm.Manager.model" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> for this <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a>. This attribute is
assigned by the Object data mapper at runtime.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Manager.router">
<tt class="descname">router</tt><a class="headerlink" href="#stdnet.odm.Manager.router" title="Permalink to this definition">¶</a></dt>
<dd><p>The <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> which contain this this <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Manager.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#stdnet.odm.Manager.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../backends/api.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> for this <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Manager.read_backend">
<tt class="descname">read_backend</tt><a class="headerlink" href="#stdnet.odm.Manager.read_backend" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="../backends/api.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> for read-only operations (Queries).</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Manager.query_class">
<tt class="descname">query_class</tt><a class="headerlink" href="#stdnet.odm.Manager.query_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for querying. Default is <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Manager.session_factory">
<tt class="descname">session_factory</tt><a class="headerlink" href="#stdnet.odm.Manager.session_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.session">
<tt class="descname">session</tt><big>(</big><em>session=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.session" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>. This is a shortcut for the
<tt class="xref py py-meth docutils literal"><span class="pre">Mapper.session()</span></tt> method.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.new">
<tt class="descname">new</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.new" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new instance of <a class="reference internal" href="#stdnet.odm.Manager.model" title="stdnet.odm.Manager.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a> and commit it to the backend
server. This a shortcut method for the more verbose:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">instance</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">session</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">MyModel</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.save">
<tt class="descname">save</tt><big>(</big><em>instance</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save an existing instance of <a class="reference internal" href="#stdnet.odm.Manager.model" title="stdnet.odm.Manager.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a>. This a shortcut
method for the more verbose:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">instance</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">session</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.update_or_create">
<tt class="descname">update_or_create</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.update_or_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Invokes the <a class="reference internal" href="#stdnet.odm.Session.update_or_create" title="stdnet.odm.Session.update_or_create"><tt class="xref py py-class docutils literal"><span class="pre">Session.update_or_create</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.all">
<tt class="descname">all</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all instances for this manager.
Equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.create_all">
<tt class="descname">create_all</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.create_all" title="Permalink to this definition">¶</a></dt>
<dd><p>A method which can implement table creation. For sql models. Does
nothing for redis or mongo.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.query">
<tt class="descname">query</tt><big>(</big><em>session=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> for <a class="reference internal" href="#stdnet.odm.Manager.model" title="stdnet.odm.Manager.model"><tt class="xref py py-attr docutils literal"><span class="pre">Manager.model</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.empty">
<tt class="descname">empty</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an empty <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> for <a class="reference internal" href="#stdnet.odm.Manager.model" title="stdnet.odm.Manager.model"><tt class="xref py py-attr docutils literal"><span class="pre">Manager.model</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.filter">
<tt class="descname">filter</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> for <a class="reference internal" href="#stdnet.odm.Manager.model" title="stdnet.odm.Manager.model"><tt class="xref py py-attr docutils literal"><span class="pre">Manager.model</span></tt></a> with
a filter.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.exclude">
<tt class="descname">exclude</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.exclude" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> for <a class="reference internal" href="#stdnet.odm.Manager.model" title="stdnet.odm.Manager.model"><tt class="xref py py-attr docutils literal"><span class="pre">Manager.model</span></tt></a> with
a exclude filter.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.search">
<tt class="descname">search</tt><big>(</big><em>text</em>, <em>lookup=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> for <a class="reference internal" href="#stdnet.odm.Manager.model" title="stdnet.odm.Manager.model"><tt class="xref py py-attr docutils literal"><span class="pre">Manager.model</span></tt></a> with
a full text search value.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.get">
<tt class="descname">get</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for <tt class="docutils literal"><span class="pre">self.query().get**kwargs)</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.pkvalue">
<tt class="descname">pkvalue</tt><big>(</big><em>instance</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.pkvalue" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the primary key value for <tt class="docutils literal"><span class="pre">instance</span></tt>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="relatedmanager">
<h3>RelatedManager<a class="headerlink" href="#relatedmanager" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.related.RelatedManager">
<em class="property">class </em><tt class="descclassname">stdnet.odm.related.</tt><tt class="descname">RelatedManager</tt><big>(</big><em>field</em>, <em>model=None</em>, <em>instance=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.related.RelatedManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for managers handling relationships between models.
While standard <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> are class properties of a model,
related managers are accessed by instances to easily retrieve instances
of a related model.</p>
<dl class="attribute">
<dt id="stdnet.odm.RelatedManager.relmodel">
<tt class="descname">relmodel</tt><a class="headerlink" href="#stdnet.odm.RelatedManager.relmodel" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> this related manager relates to.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.RelatedManager.related_instance">
<tt class="descname">related_instance</tt><a class="headerlink" href="#stdnet.odm.RelatedManager.related_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of the <a class="reference internal" href="#stdnet.odm.RelatedManager.relmodel" title="stdnet.odm.RelatedManager.relmodel"><tt class="xref py py-attr docutils literal"><span class="pre">relmodel</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.related.RelatedManager.session">
<tt class="descname">session</tt><big>(</big><em>session=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.related.RelatedManager.session" title="Permalink to this definition">¶</a></dt>
<dd><p>Override <a class="reference internal" href="#stdnet.odm.Manager.session" title="stdnet.odm.Manager.session"><tt class="xref py py-meth docutils literal"><span class="pre">Manager.session()</span></tt></a> so that this
<tt class="xref py py-class docutils literal"><span class="pre">RelatedManager</span></tt> can retrieve the session from the
<a class="reference internal" href="#stdnet.odm.RelatedManager.related_instance" title="stdnet.odm.RelatedManager.related_instance"><tt class="xref py py-attr docutils literal"><span class="pre">related_instance</span></tt></a> if available.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="one2manyrelatedmanager">
<h3>One2ManyRelatedManager<a class="headerlink" href="#one2manyrelatedmanager" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.related.One2ManyRelatedManager">
<em class="property">class </em><tt class="descclassname">stdnet.odm.related.</tt><tt class="descname">One2ManyRelatedManager</tt><big>(</big><em>field</em>, <em>model=None</em>, <em>instance=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.related.One2ManyRelatedManager" title="Permalink to this definition">¶</a></dt>
<dd><p>A specialised <tt class="xref py py-class docutils literal"><span class="pre">RelatedManager</span></tt> for handling one-to-many
relationships under the hood.
If a model has a <a class="reference internal" href="fields.html#stdnet.odm.ForeignKey" title="stdnet.odm.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> field, instances of
that model will have access to the related (foreign) objects
via a simple attribute of the model.</p>
</dd></dl>

</div>
<div class="section" id="many2manyrelatedmanager">
<h3>Many2ManyRelatedManager<a class="headerlink" href="#many2manyrelatedmanager" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.related.Many2ManyRelatedManager">
<em class="property">class </em><tt class="descclassname">stdnet.odm.related.</tt><tt class="descname">Many2ManyRelatedManager</tt><big>(</big><em>field</em>, <em>model=None</em>, <em>instance=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.related.Many2ManyRelatedManager" title="Permalink to this definition">¶</a></dt>
<dd><p>A specialized <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> for handling
many-to-many relationships under the hood.
When a model has a <a class="reference internal" href="fields.html#stdnet.odm.ManyToManyField" title="stdnet.odm.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a>, instances
of that model will have access to the related objects via a simple
attribute of the model.</p>
<dl class="method">
<dt id="stdnet.odm.related.Many2ManyRelatedManager.add">
<tt class="descname">add</tt><big>(</big><em>value</em>, <em>session=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.related.Many2ManyRelatedManager.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add <tt class="docutils literal"><span class="pre">value</span></tt>, an instance of <tt class="xref py py-attr docutils literal"><span class="pre">formodel</span></tt> to the
<tt class="xref py py-attr docutils literal"><span class="pre">through</span></tt> model. This method can only be accessed by an instance of the
model for which this related manager is an attribute.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.related.Many2ManyRelatedManager.remove">
<tt class="descname">remove</tt><big>(</big><em>value</em>, <em>session=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.related.Many2ManyRelatedManager.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove <em>value</em>, an instance of <tt class="docutils literal"><span class="pre">self.model</span></tt> from the set of
elements contained by the field.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.related.Many2ManyRelatedManager.throughquery">
<tt class="descname">throughquery</tt><big>(</big><em>session=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.related.Many2ManyRelatedManager.throughquery" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> on the <tt class="docutils literal"><span class="pre">throughmodel</span></tt>, the model
used to hold the <a class="reference internal" href="../examples/related.html#many-to-many"><em>many-to-many relationship</em></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="lazyproxy">
<h3>LazyProxy<a class="headerlink" href="#lazyproxy" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.LazyProxy">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">LazyProxy</tt><big>(</big><em>field</em><big>)</big><a class="headerlink" href="#stdnet.odm.LazyProxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for descriptors used by <a class="reference internal" href="fields.html#stdnet.odm.ForeignKey" title="stdnet.odm.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> and
<a class="reference internal" href="fields.html#stdnet.odm.StructureField" title="stdnet.odm.StructureField"><tt class="xref py py-class docutils literal"><span class="pre">StructureField</span></tt></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.LazyProxy.field">
<tt class="descname">field</tt><a class="headerlink" href="#stdnet.odm.LazyProxy.field" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> which create this descriptor. Either a
<a class="reference internal" href="fields.html#stdnet.odm.ForeignKey" title="stdnet.odm.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> or a <a class="reference internal" href="fields.html#stdnet.odm.StructureField" title="stdnet.odm.StructureField"><tt class="xref py py-class docutils literal"><span class="pre">StructureField</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.LazyProxy.load">
<tt class="descname">load</tt><big>(</big><em>instance</em>, <em>session</em><big>)</big><a class="headerlink" href="#stdnet.odm.LazyProxy.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the lazy data for this descriptor. Implemented by
subclasses.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="registration">
<span id="register-model"></span><h2>Registration<a class="headerlink" href="#registration" title="Permalink to this headline">¶</a></h2>
<p>To interact with a <a class="reference internal" href="../backends/api.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a>,
Models must registered. Registration is obtained via a <tt class="xref py py-class docutils literal"><span class="pre">Router</span></tt> which
has two methods for registering models. The first one is the <tt class="xref py py-meth docutils literal"><span class="pre">Router.register()</span></tt>
method which is used to register a model and, possibly, all its related
models. The second method is the <tt class="xref py py-meth docutils literal"><span class="pre">Router.register_applications()</span></tt> which
registers all <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> from a list of python dotted paths or
python modules.</p>
<p>Check the <a class="reference internal" href="../examples/registration.html#tutorial-registration"><em>registering models tutorial</em></a>
for further explanation and examples.</p>
<div class="section" id="router">
<h3>Router<a class="headerlink" href="#router" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo">
<a href="../index.html">
  <img class="logo" width="200" src="../static/net.jpg" alt="Logo"/>
</a>
</p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Model and Query API</a><ul>
<li><a class="reference internal" href="#model">Model</a><ul>
<li><a class="reference internal" href="#stdmodel-class">StdModel Class</a></li>
<li><a class="reference internal" href="#id1">Model</a></li>
<li><a class="reference internal" href="#create-model">Create Model</a></li>
<li><a class="reference internal" href="#model-meta">Model Meta</a></li>
<li><a class="reference internal" href="#model-state">Model State</a></li>
<li><a class="reference internal" href="#autoincrement">autoincrement</a></li>
</ul>
</li>
<li><a class="reference internal" href="#queries">Queries</a><ul>
<li><a class="reference internal" href="#query-base-class">Query base class</a></li>
<li><a class="reference internal" href="#query">Query</a></li>
<li><a class="reference internal" href="#queryelement">QueryElement</a></li>
<li><a class="reference internal" href="#searchengine-interface">SearchEngine Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-structures">Data Structures</a><ul>
<li><a class="reference internal" href="#creating-structures">Creating Structures</a></li>
<li><a class="reference internal" href="#base-class-and-mixins">Base Class and Mixins</a></li>
<li><a class="reference internal" href="#list">List</a></li>
<li><a class="reference internal" href="#set">Set</a></li>
<li><a class="reference internal" href="#orderedset">OrderedSet</a></li>
<li><a class="reference internal" href="#hashtable">HashTable</a></li>
<li><a class="reference internal" href="#ts">TS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sessions">Sessions</a><ul>
<li><a class="reference internal" href="#session">Session</a></li>
<li><a class="reference internal" href="#session-model">Session Model</a></li>
<li><a class="reference internal" href="#transaction">Transaction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#managers">Managers</a><ul>
<li><a class="reference internal" href="#manager">Manager</a></li>
<li><a class="reference internal" href="#relatedmanager">RelatedManager</a></li>
<li><a class="reference internal" href="#one2manyrelatedmanager">One2ManyRelatedManager</a></li>
<li><a class="reference internal" href="#many2manyrelatedmanager">Many2ManyRelatedManager</a></li>
<li><a class="reference internal" href="#lazyproxy">LazyProxy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#registration">Registration</a><ul>
<li><a class="reference internal" href="#router">Router</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">API</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="fields.html"
                        title="next chapter">Fields API</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../sources/api/models.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
        &copy; Copyright 2010-2013, Luca Sbardella.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  
  _gaq.push(['_setAccount', 'UA-3900561-6']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>